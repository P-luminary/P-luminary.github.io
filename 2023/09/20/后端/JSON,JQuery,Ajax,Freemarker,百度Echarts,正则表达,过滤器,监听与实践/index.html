
<!DOCTYPE html>
<html lang="zh_CH ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P-luminary || JSON,JQuery,Ajax,Freemarker,百度Echarts,正则表达,过滤器,监听与实践</title>
    <meta name="author" content="Asuna">
    <meta name="description" content=" ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/https://raw.githubusercontent.com/P-luminary/images/master/data/asuna.jpg">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/maiden-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">P-luminary</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/tags/语法">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>P-luminary</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/tags/语法">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>JSON,JQuery,Ajax,Freemarker,百度Echarts,正则表达,过滤器,监听与实践 </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2023/9/20
        </span>

        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/后端" style=color:#ffa2c4>
                    后端
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <h4 id="JSON-JavaScript-Object-Notation-JavaScript对象表示法"><a href="#JSON-JavaScript-Object-Notation-JavaScript对象表示法" class="headerlink" title="JSON (JavaScript Object Notation) [JavaScript对象表示法]"></a>JSON (JavaScript Object Notation) [JavaScript对象表示法]</h4><ul>
<li>掌握JSON语法的书写规则</li>
<li>掌握JSON与JavaScript的交互技巧</li>
<li>掌握JSON与Java之间的序列化与反序列化</li>
</ul>
<p>JSON是轻量级的文本数据交换格式，独立于语言，具有自我描述性，更易理解，已经逐渐替代了XML</p>
<pre><code class="json">&#123;
    &quot;sites&quot;:[
        &#123;&quot;name&quot;:&quot;慕课网&quot;,&quot;url&quot;:&quot;www.imooc.com&quot;&#125;,
        &#123;&quot;name&quot;:&quot;百度&quot;,&quot;url&quot;:&quot;www.baidu.com&quot;&#125;
    ]
&#125;
</code></pre>
<h3 id="JSON语法规则"><a href="#JSON语法规则" class="headerlink" title="JSON语法规则"></a>JSON语法规则</h3><ul>
<li>数据由键(key)&#x2F;值(value)描述，由逗号分隔</li>
<li>大括号代表一个完整的对象，拥有多个键&#x2F;值对</li>
<li>中括号保存数组，多个对象之间使用逗号分割</li>
</ul>
<p>所有的key和value都要用双引号进行标注</p>
<h3 id="JSON存储员工信息"><a href="#JSON存储员工信息" class="headerlink" title="JSON存储员工信息"></a>JSON存储员工信息</h3><pre><code class="json">[
  &#123;
    &quot;empno&quot;: 7369,
    &quot;ename&quot;: &quot;李宁&quot;,
    &quot;job&quot;: &quot;软件工程师&quot;,
    &quot;hiredate&quot;: &quot;2017-05-12&quot;,
    &quot;salary&quot;: 13000,
    &quot;dname&quot;: &quot;研发部&quot;
  &#125;,
  &#123;
    &quot;empno&quot;: 8848,
    &quot;ename&quot;: &quot;小明&quot;,
    &quot;job&quot;: &quot;销售总监&quot;,
    &quot;hiredate&quot;: &quot;2022-4-23&quot;,
    &quot;salary&quot;: 8000,
    &quot;dname&quot;: &quot;人事部&quot;,
    &quot;customers&quot;: [
      &#123;
        &quot;cname&quot;: &quot;李东&quot;
      &#125;,
      &#123;
        &quot;cname&quot;: &quot;刘楠&quot;
      &#125;
    ]
  &#125;
]
</code></pre>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        var json = [
            &#123;
                &quot;empno&quot;: 7369,
                &quot;ename&quot;: &quot;李宁&quot;,
                &quot;job&quot;: &quot;软件工程师&quot;,
                &quot;hiredate&quot;: &quot;2017-05-12&quot;,
                &quot;salary&quot;: 13000,
                &quot;dname&quot;: &quot;研发部&quot;
            &#125;,
            &#123;
                &quot;empno&quot;: 8848,
                &quot;ename&quot;: &quot;小明&quot;,
                &quot;job&quot;: &quot;销售总监&quot;,
                &quot;hiredate&quot;: &quot;2022-4-23&quot;,
                &quot;salary&quot;: 8000,
                &quot;dname&quot;: &quot;人事部&quot;,
                &quot;customers&quot;: [
                    &#123;
                        &quot;cname&quot;: &quot;李东&quot;
                    &#125;,
                    &#123;
                        &quot;cname&quot;: &quot;刘楠&quot;
                    &#125;
                ]
            &#125;
        ];
        //在浏览器控制台中对json内容进行输出
        console.log(json);
        for (var i = 0; i &lt; json.length; i++)&#123;
            var emp = json[i];
            document.write(&quot;&lt;h1&gt;&quot;);
            document.write(emp.empno);
            document.write(&quot;,&quot; + emp.ename);
            document.write(&quot;,&quot; + emp.job);
            document.write(&quot;,&quot; + emp.hiredate);
            document.write(&quot;,&quot; + emp.salary);
            document.write(&quot;,&quot; + emp.dname);
            document.write(&quot;&lt;/h1&gt;&quot;);
            if (emp.customers != null)&#123;
                document.write(&quot;&lt;h2&gt;&quot;+emp.ename+&quot;的顾客是&quot;)
                for (var j = 0; j &lt; emp.customers.length; j++)&#123;
                    var customer = emp.customers[j];
                    document.write(customer.cname + &quot;,&quot;);
                &#125;
                document.write(&quot;&lt;/h2&gt;&quot;);
            &#125;
        &#125;
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="JSON与字符串相互转换"><a href="#JSON与字符串相互转换" class="headerlink" title="JSON与字符串相互转换"></a>JSON与字符串相互转换</h3><ul>
<li><strong>JSON.parse()方法</strong>将<u>字符串转换为JSON对象</u></li>
<li><strong>JSON.stringify()方法</strong>将<u>JSON对象转换为字符串</u></li>
</ul>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
       var str = &quot;&#123;\&quot;class_name\&quot; : \&quot;五年fdhgfs级三班\&quot;&#125;&quot;; &lt;!--字符串 斜杠进行原意的输出--&gt;
       var json = JSON.parse(str);
       console.log(str);
       console.log(json);
       document.write(&quot;班级：&quot; + json.class_name);
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="JS中JSON转为字符串"><a href="#JS中JSON转为字符串" class="headerlink" title="JS中JSON转为字符串"></a>JS中JSON转为字符串</h3><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
       var json1 = &quot;&#123;\&quot;class_name\&quot; : \&quot;五年级三班\&quot;&#125;&quot;; &lt;!--字符串 斜杠进行原意的输出--&gt;
       var str1 = JSON.stringify(json1);
       console.log(json1);
       console.log(str1);
       var json2 = &#123;&#125;;
       json2.class_name = &quot;五年级五班&quot;;
       json2.floor = &quot;团委楼四层&quot;;
       json2.teacher = &quot;王义夫&quot;
       console.info(json2);
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="JSON与Java交互"><a href="#JSON与Java交互" class="headerlink" title="JSON与Java交互"></a>JSON与Java交互</h3><p>JSON工具包：json与java之间的互相转换</p>
<ul>
<li>FastJson是阿里巴巴著名的JSON序列化与反序列化工具包</li>
<li>FastJson国内拥有大量使用者，拥有API简单，效率高等优点</li>
</ul>
<pre><code class="java">https://repo1.maven.org/maven2/com/alibaba/fastjson/ 下载fastjson
或者配置maven依赖
&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="FastJson序列化与JSON注解"><a href="#FastJson序列化与JSON注解" class="headerlink" title="FastJson序列化与JSON注解"></a>FastJson序列化与JSON注解</h3><pre><code class="java">public class Employee&#123;
    private Integer empno;
    private String ename;
    private String job;
    //日期格式化
    @JSONField(name=&quot;hiredate&quot;, format=&quot;yyyy-MM-dd HH:mm:ss&quot;)
    private Date hdate;
    private Float salary;
    @JSONField(serialize = false) //不对dname进行序列化
    private String dname;
    ......
&#125;
</code></pre>
<pre><code class="java">public class FastJsonSample1&#123;
    public static void main(String[] args)&#123;
        Employee employee = new Employee();
        employee.setEmpno(4488);
        employee.setEname(&quot;王晓东&quot;);
        employee.setJob(&quot;客户经理&quot;);
        employee.setSalary(1000f);
        employee.setDname(&quot;市场部&quot;);
        //用日期来对时间进行初始化
        --------------//对应上方日期格式化@JSONField-------------------
        Calendar c = Calendar.getInstance();
        c.set(2019,0,30,0,0,0);
        employee.setHdate(c.getTime());//获取所需要的日期对象
        -------------------------------------------------------------
        //FastJSON中提供了JSON对象，完成对象对JSON字符串的转换
        String json = JSON.toJSONString(employee);
        System.out.println(json);
        //                            ↓↓ 原始字符串 反序列化类 ↓↓
        Employee emp = JSON.parseObject(json, Employee.class); //转换为何种对象
        //JSNO.parse()方法将字符串转换为JSON对象
        System.out.println(emp.getEname());
    &#125;
&#125;
</code></pre>
<h3 id="FastJSON对象数组序列化与反序列化"><a href="#FastJSON对象数组序列化与反序列化" class="headerlink" title="FastJSON对象数组序列化与反序列化"></a>FastJSON对象数组序列化与反序列化</h3><p><strong>JSON序列化与反序列化的用途</strong>：数据传输和数据保存 [<u>A电脑中有100个员工信息，通过JSON把数据变成字符串发送給另一个系统，再进行转换</u>]</p>
<pre><code class="java">public class FastJsonSample2&#123;
    public static void main(String[] args)&#123;
        List emplist = new ArrayList();
        for(int i = 1; i &lt;= 100; i++)&#123;
            Employee employee = new Employee();
            employee.setEmpno(4488 + i);
            employee.setEname(&quot;员工&quot; + i);
            emplist.add(employee);
        &#125;
        String json = JSON.toJSONString(emplist);
        System.out.println(json);
        List&lt;Employee&gt; emps = JSON.parseArray(json, Employee.class);
        for(Employee e : emps)&#123;
            System.out.println(e.getEmpno() + &quot;:&quot; + e.getEname());
        &#125;
    &#125;
&#125;
</code></pre>
<hr>
<p>JSON教程 <a target="_blank" rel="noopener" href="https://www.cainiaojc.com/json/json_objects.html">https://www.cainiaojc.com/json/json_objects.html</a><br>JSON用于与Web服务器交换数据。数据发送到Web服务器时，数据必须是字符串</p>
<pre><code class="json">JSON格式几乎与JavaScript对象相同 
在JSON中，键必须是字符串，并用双引号引起来 &#123;&quot;name&quot;:&quot;Seagull&quot;&#125;
在JavaScript中，键可以是字符串数字或标识符 &#123;name : &quot;Seagull&quot;&#125; 
JSON字符串类型 &#123;&quot;name&quot;:&quot;Seagull&quot;&#125;
JSON数字类型 &#123;&quot;age&quot;:22&#125;
JSON布尔类型 &#123;&quot;isAdult&quot;:true&#125;
JSON对象类型 &#123;&quot;user&quot;:&#123;&quot;name:&quot;&quot;Seagull&quot;,&quot;age&quot;:22,&quot;city&quot;:&quot;New Delhi&quot;&#125;&#125; 
JSON数组类型 &#123;&quot;user&quot;:[&quot;Seagull&quot;,&quot;Cynthia&quot;,&quot;Tarush&quot;]&#125; 
</code></pre>
<pre><code class="json">//来自服务器的JSON
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() &#123;
   if (this.readyState = 4 &amp;&amp; this.status = 200) &#123;
      var myObj = JSON.parse(this.responseText);
      document.getElementById(&quot;output&quot;).innerHTML = myObj.name;
   &#125;
&#125;;
httpRequest.open(&quot;GET&quot;, &quot;demo.json&quot;, true);
httpRequest.send();
</code></pre>
<p>**JSON.parse()**方法解析JSON字符串来构造JavaScript值或该字符串描述<br>**JSON.stringify()**方法将JavaScript对象或值转换为JSON字符串</p>
<h6 id="解析日期parse"><a href="#解析日期parse" class="headerlink" title="解析日期parse()"></a>解析日期parse()</h6><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;title&gt;JSON.parse() 日期与json转换示例 - 基础教程(cainiaojc.com)&lt;/title&gt;
&lt;body&gt;
&lt;p&gt;如果需要包含日期，则将其写为字符串，然后稍后将其转换回日期对象:&lt;/p&gt;
&lt;p id=&quot;output&quot;&gt;&lt;/p&gt;
&lt;script&gt;
var myJSON = &#39;&#123;&quot;name&quot;:&quot;Seagull&quot;, &quot;birth&quot;:&quot;1997-11-10&quot;, &quot;city&quot;:&quot;New Delhi&quot;&#125;&#39;;
var myObj = JSON.parse(myJSON);
myObj.birth = new Date(myObj.birth);
document.getElementById(&quot;output&quot;).innerHTML = myObj.name + &quot; DOB is, &quot; + myObj.birth;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt; 
/*如果需要包含日期，则将其写为字符串，然后稍后将其转换回日期对象:
Seagull DOB is, Mon Nov 10 1997 08:00:00 GMT+0800 (中国标准时间)*/ 
</code></pre>
<h6 id="解析日期stringify"><a href="#解析日期stringify" class="headerlink" title="解析日期stringify()"></a>解析日期stringify()</h6><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;title&gt;JSON.stringify() 将日期对象转换为字符串示例 - 基础教程(cainiaojc.com)&lt;/title&gt;
&lt;body&gt;
&lt;p&gt; JSON.stringify()方法会将任何日期对象转换为字符串:&lt;/p&gt;
&lt;p id=&quot;output&quot;&gt;&lt;/p&gt;
&lt;script&gt;
var myObj = &#123; name: &quot;Seagull&quot;, today: new Date(), city : &quot;New Delhi&quot; &#125;;
var myJSON = JSON.stringify(myObj);
document.getElementById(&quot;output&quot;).innerHTML = myJSON;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
/*JSON.stringify()方法会将任何日期对象转换为字符串:
&#123;&quot;name&quot;:&quot;Seagull&quot;,&quot;today&quot;:&quot;2023-10-19T09:21:17.353Z&quot;,&quot;city&quot;:&quot;New Delhi&quot;*/
</code></pre>
<p>Java中的this.对象不会被函数内部修改 去寻找定义的值<br>this可以去调到外面的东西 解决了变量名一样的冲突<br>this区分成员变量和局部变量<br>this调用成员方法 </p>
<p>Java中的static是公共的变量池 </p>
<hr>
<h3 id="jQuery-主流的JavaScript库-与Ajax"><a href="#jQuery-主流的JavaScript库-与Ajax" class="headerlink" title="jQuery[主流的JavaScript库]与Ajax"></a>jQuery[主流的JavaScript库]与Ajax</h3><ul>
<li>了解jQuery3的基本使用方法</li>
<li>掌握Ajax处理流程与实现流程</li>
<li>掌握jQuery中Ajax方法的使用</li>
</ul>
<p>jQuery是一个轻量级JS库，使用十分简单；<u>jQuery的核心是<strong>选择器</strong>，<strong>用于获取页面元素</strong></u></p>
<h3 id="jQuery选择器-先引用"><a href="#jQuery选择器-先引用" class="headerlink" title="jQuery选择器 [先引用]"></a>jQuery选择器 [先引用]</h3><script type="text/javascript" src="js/jquery-3.1.1.js"> </script> //引用jQuery
<script type="text/javascript"> //编写自己的代码

jQuery选择器用于选中需要操作的页面元素

###### 语法

1.<span style = "color : red">**jQuery**</span> (选择器表达式)
2.<span style = "color : red">**$**</span> (选择器表达式)

###### <span style = "color:red">基本选择器</span>

|       语法        |                  说明                  |
| :---------------: | :------------------------------------: |
|   **$("#id")**    |     **ID选择器, 指定Id元素的对象**     |
|   **$("标签")**   | **元素选择器, 选择指定标签名的选择器** |
|  **$(".class")**  | **类选择器, 选中拥有指定css类的元素**  |
| **$("S1,S2,SN")** |     **组合选择器, 对元素进行组合**     |

```html
$("#btnSelect").addClass("highlight"); //这个是id <button id="btnSelect">
$(".myclass").addClass("highlight"); //这个是类 <p class="myclass">
```

> 多个选择器","  => a, .myclass

###### 层叠选择器

层叠选择器是根据元素的位置关系来获取元素的选择器表达式

|                            语法                            |    说明    |
| :--------------------------------------------------------: | :--------: |
|                  $("ancestor descendant")                  | 后代选择器 |
|  $("ancestor > descendant") <br />[只选中父节点的子节点]   |  子选择器  |
| $("prev ~ siblings")<br />[只选中元素后所有符合的平级节点] | 兄弟选择器 |

###### 属性选择器

属性选择器是根据元素的属性值来选择元素的选择器表达式

|                             语法                             |              说明              |
| :----------------------------------------------------------: | :----------------------------: |
| $("selector[attribute=value]")<br /><u>input[type='text']</u> |   选中属性值等于具体值的组件   |
|               $("selector[attribute^=value]")                | 选中属性值以某值**开头**的组件 |
| ￥("selector[attribute￥=value]")<br /><u>a[href￥='edu.cn']</u> \|<br /> "￥是$" | 选中属性值以某值**结尾**的组件 |
|               $("selector[attribute*=value]")                |  选中属性值**包含某值**的组件  |

###### 位置选择器

位置选择器是指通过位置获取指定的元素，例如 “获取第3个元素”

|                    语法                     |            说明             |
| :-----------------------------------------: | :-------------------------: |
| $("selector:**first**")<br />.myclass:first |       获取第一个元素        |
|           $("selector:**last**")            |      获取最后一个元素       |
|           $("selector:**even**")            |  获取偶位置的元素(从0开始)  |
|            $("selector:**odd**")            | 获取奇数位置的元素(从0开始) |
|           $("selector:**eq(n)**")           | 获取指定位置的元素(从0开始) |

###### 表单选择器

表单选择器是获取表单元素的简化形式，例如：获取所有文本框

|            语法            |     说明     |
| :------------------------: | :----------: |
|  $("selector:**input**")   | 所有输入元素 |
|   $("selector:**text**")   |  获取文本框  |
| $("selector:**password**") |  获取密码框  |
|  $("selector:**submit**")  | 获取提交按钮 |
|  $("selector:**reset**")   | 获取重置按钮 |

###### 小总结

| $("*")                  | 选取所有元素                                         |
| ----------------------- | ---------------------------------------------------- |
| $("p.intro")            | 选取class为intro的< p >元素                          |
| $(”ul li:first“)        | 选取第一个< ul >元素的第一个< li >元素               |
| $("a[target='_blank']") | 选取所有target属性值等于"_blank"的< a >元素          |
| $(":button")            | 选取所有type="button"的< input >元素和< button >元素 |



### 操作元素属性

- **attr(name|properties|key)** 获取或设置元素属性

```html
<script type="text/javascript" src="js/jquery-3.1.1.js" ></script>
<script type="text/javascript">
    var href_attr = $("a[href*='163']").attr("href"); //一个参数是获取
    alert(href_attr);
    //两个参数是设置 把前面的变成后面的   ↓↓↓↓↓↓↓
    $("a[href*='163']").attr("href", "https://www.163.com");
    var attr = $("a").attr("href");
    alert(attr);
    $("a").removeAttr("href"); //移除后就变成了文本
```



### 操作元素css属性

- **css()** 获取或设置匹配元素的样式属性
- **addClass()** 为每个匹配的元素添加指定的类名
- **removeClass()** 从所有匹配的元素中删除全部或者指定的类

> $("a").css("color")  如果有多个元素 默认返回第一个元素

```html
<script type="text/javascript" src="js/jquery-3.1.1.js" ></script>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
    $(&quot;span&quot;).css(&quot;color&quot;,&quot;red&quot;);
    //简化形式 中间加JSON表达式
    $(&quot;a&quot;).css(&#123;&quot;color&quot; : &quot;red&quot;, &quot;font-size&quot; : &quot;30px&quot;, &quot;font-weight&quot; : &quot;bold&quot;, &quot;font-style&quot; : &quot;italic&quot;&#125;)
    //为选中的选择器增添类效果 为li增加两个css类
    $(&quot;li&quot;).addClass(&quot;highlight myclass&quot;);
    $(&quot;p&quot;).removeClass(&quot;myclass&quot;) //移除类
    var color = $(&quot;a&quot;).css(&quot;color&quot;,&quot;orange&quot;);
    // alert(color)
</code></pre>
<pre><code>


### 设置元素内容

- **val()** 获取或设置输入项的值
- **text()** 获取或设置元素的纯文本
- **html()** 获取或设置元素内部的HTML

```html
.. &lt;input type = &quot;text&quot; name = &quot;uname&quot; value = &quot;admin&quot;/&gt; ..//将初始uname值变admin..
.. &lt;span class = &quot;myclass&quot;&gt;我是myclass类的span标签&lt;/span&gt; ..
&lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.1.1.js&quot; &gt;&lt;/script&gt;
&lt;script type = &quot;text/javascript&quot;&gt;
    //获取或设置文本输入框的内容
    $(&quot;input[name=&#39;uname&#39;]&quot;).val(&quot;administrator&quot;);
    
    //text与html方法最大的区别在于对文本中的html标签是否进行转义
    var vspan = $(&quot;span.myclass&quot;).text(&quot;&lt;b&gt;锄禾日当午&lt;/b&gt;&quot;);
    alert(vspan);//锄禾日当午 纯文本中带了&lt;b&gt;标签
    
    var vspan = $(&quot;span.myclass&quot;).html(&quot;&lt;b&gt;锄禾日当午&lt;/b&gt;&quot;);  
    alert(vspan);//&lt;b&gt;锄禾日当午&lt;/b&gt;
&lt;/script&gt;
</code></pre>
<h3 id="jquery事件处理方法"><a href="#jquery事件处理方法" class="headerlink" title="jquery事件处理方法"></a>jquery事件处理方法</h3><ul>
<li><strong>on(“click”, function)</strong> 为选中的页面元素绑定单机事件</li>
<li><strong>click(function)</strong> 是绑定事件的简写形式</li>
<li>处理方法中提供了event参数包含了事件的相关信息</li>
</ul>
<table>
<thead>
<tr>
<th align="center">鼠标事件</th>
<th align="center">键盘事件</th>
<th align="center">表单事件</th>
<th align="center">文档&#x2F;窗口事件</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>click</strong></td>
<td align="center">keypress<br />(键盘完整按下弹起)</td>
<td align="center"><strong>submit</strong><br />(表单提交)</td>
<td align="center"><strong>load</strong><br />（文档加载）</td>
</tr>
<tr>
<td align="center">dblclick(双击)</td>
<td align="center">keydown<br />(键盘按下)</td>
<td align="center">change<br />(表单发生变化)</td>
<td align="center">resize<br />(文档窗口产生变化)</td>
</tr>
<tr>
<td align="center">mouseenter<br />(滑鼠移动)</td>
<td align="center">keyup<br />(键盘弹起)</td>
<td align="center">focus<br />（表单输入项获得焦点）</td>
<td align="center">scroll<br />(文档窗口滚动变化)</td>
</tr>
<tr>
<td align="center">mouseleave<br />(滑鼠移出)</td>
<td align="center"></td>
<td align="center">blur<br />（表单输入项失去焦点)</td>
<td align="center">unload<br />(文档窗口关闭&#x2F;卸载)</td>
</tr>
<tr>
<td align="center">mouseover<br />(滑鼠移动过程)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<pre><code class="html">.. &lt;p class = &quot;myclass&quot;&gt;我是拥有myclass的p标签&lt;/p&gt; ..
.. &lt;input type = &quot;text&quot; name = &quot;uname&quot; value = &quot;admin&quot;/&gt; ..
&lt;script type = &quot;text/javascript&quot; src = &quot;js/jquery-3.3.1.js&quot;&gt;&lt;/script&gt;
&lt;script type = &quot;text/javascript&quot;&gt;
    $(&quot;p.myclass&quot;).on(&quot;click&quot;, function()&#123;
    //$(this)是指当前事件产生的对象$(&quot;p.myclass&quot;)
    $(this).css(&quot;background-color&quot;, &quot;yellow&quot;);
&#125;)
    $(&quot;span.myclass&quot;).click(function()&#123;
    $(this).css(&quot;background-color&quot;, &quot;lightgreen&quot;);                      
&#125;) 
    
    $(&quot;input[name=&#39;uname&#39;]&quot;).keypress(function(event)&#123;
        console.log(event); //打印事件 F12 每次输入按键的Console
        $(this).css(&quot;color&quot;, &quot;red&quot;);
    &#125;)
    
&lt;/script&gt;
----------------------------------------------------------------
&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;script src=&quot;https://cdn,staticfile.org/jquery/1.10.2/jquery.min.js&quot;&gt;
&lt;/script&gt;
&lt;script&gt;
$(document).ready(function()&#123;
 $(&quot;p&quot;).click(function())&#123;
    &lt;!--动作触发后执行的代码--&gt;
    #(this).hide();
&#125;);
&#125;);
&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;
            如果你点我，我就会消失。
        &lt;/p&gt;
        &lt;p&gt;
            点我消失！
        &lt;/p&gt;
    &lt;/body&gt;
</code></pre>
<h3 id="jQuery-hide-和show"><a href="#jQuery-hide-和show" class="headerlink" title="jQuery hide()和show()"></a>jQuery hide()和show()</h3><p>使用hide()和show()方法来隐藏和显示HTML元素</p>
<pre><code class="html">$(&quot;#hide&quot;).click(function()&#123;
    $(&quot;p&quot;).hide();
&#125;);
$(&quot;#show&quot;).click(function()&#123;
    $(&quot;p&quot;).show();
&#125;);
</code></pre>
<h6 id="隐藏速度"><a href="#隐藏速度" class="headerlink" title="隐藏速度"></a>隐藏速度</h6><blockquote>
<p>$(selector).hide(speed,callback);</p>
</blockquote>
<blockquote>
<p>$(selector).show(speed,callback);</p>
</blockquote>
<pre><code class="html">&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;script src=&quot;https://cdn,staticfile.org/jquery/1.10.2/jquery.min.js&quot;&gt;
&lt;/script&gt;
&lt;script&gt;
$(document).ready(function()&#123;
$(&quot;button&quot;).click(function()&#123;
    $(&quot;p&quot;).hide(1000);
 &#125;);
&#125;);
&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;button&gt;隐藏&lt;/button&gt;
      &lt;p&gt; 这是个段落&lt;/p&gt;
      &lt;p&gt; 小段落&lt;/p&gt;
    &lt;/body&gt;
</code></pre>
<h3 id="jQuery选择器实验室"><a href="#jQuery选择器实验室" class="headerlink" title="jQuery选择器实验室"></a>jQuery选择器实验室</h3><pre><code class="html">sample2.html
&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
&lt;title&gt;jQuery实验室&lt;/title&gt;

&lt;style&gt;
.myclass &#123;
    font-style: italic;
    color: darkblue;
&#125;
/* 高亮css类 */
.highlight &#123;
    color: red;
    font-size: 30px;
    background: lightblue;
&#125;
&lt;/style&gt;

&lt;/head&gt;

&lt;body&gt;
    &lt;div class=&quot;section&quot;&gt;
        &lt;h2&gt;jQuery选择器实验室&lt;/h2&gt;
        &lt;input style=&quot;height: 24px&quot; id=&quot;txtSelector&quot; /&gt;
        &lt;button id=&quot;btnSelect&quot; style=&quot;height: 30px&quot;&gt;选择&lt;/button&gt;
        &lt;hr /&gt;
        &lt;div&gt;
            &lt;p id=&quot;welcome&quot;&gt;欢迎来到选择器实验室&lt;/p&gt;
            &lt;ul&gt;
                &lt;li&gt;搜索引擎：&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt; &lt;span&gt; &lt;a
                        style=&quot;color: darkgreen&quot; href=&quot;http://www.so.com&quot;&gt;360&lt;/a&gt;
                &lt;/span&gt;
                &lt;/li&gt;
                &lt;li&gt;电子邮箱：&lt;a href=&quot;http://mail.163.com&quot;&gt;网易邮箱&lt;/a&gt; &lt;span&gt; &lt;a
                        style=&quot;color: darkgreen&quot; href=&quot;http://mail.qq.com&quot;&gt;QQ邮箱&lt;/a&gt;
                &lt;/span&gt;
                &lt;/li&gt;
                &lt;li&gt;中国名校：&lt;a href=&quot;http://www.tsinghua.edu.cn&quot;&gt;清华大学&lt;/a&gt; &lt;span&gt;
                        &lt;a style=&quot;color: darkgreen&quot; href=&quot;https://www.pku.edu.cn/&quot;&gt;北京大学&lt;/a&gt;
                &lt;/span&gt;
                &lt;/li&gt;
            &lt;/ul&gt;

            &lt;span class=&quot;myclass &quot;&gt;我是拥有myclass类的span标签&lt;/span&gt;

            &lt;p class=&quot;myclass&quot;&gt;我是拥有myclass的p标签&lt;/p&gt;
            &lt;form id=&quot;info&quot; action=&quot;#&quot; method=&quot;get&quot;&gt;
                &lt;div&gt;
                    用户名：&lt;input type=&quot;text&quot; name=&quot;uname&quot; value=&quot;admin&quot; /&gt; 密码：&lt;input
                        type=&quot;password&quot; name=&quot;upsd&quot; value=&quot;123456&quot; /&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    婚姻状况： &lt;select id=&quot;marital_status&quot;&gt;
                        &lt;option value=&quot;1&quot;&gt;未婚&lt;/option&gt;
                        &lt;option value=&quot;2&quot;&gt;已婚&lt;/option&gt;
                        &lt;option value=&quot;3&quot;&gt;离异&lt;/option&gt;
                        &lt;option value=&quot;4&quot;&gt;丧偶&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;left clear-left&quot;&gt;
                    &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt; &lt;input type=&quot;reset&quot; value=&quot;重置&quot; /&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.1.1.js&quot; &gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        /*
            id选择器使用&quot;#id值&quot;进行选择
            css选择器使用&quot;.css类名&quot;进行选择
            $(&quot;.myclass&quot;).addClass(&quot;highlight&quot;);
        */
        document.getElementById(&quot;btnSelect&quot;).onclick = function()&#123;
            var selector = document.getElementById(&quot;txtSelector&quot;).value;
            //jquery选择器方法 选择器表达式
            $(&quot;*&quot;).removeClass(&quot;highlight&quot;) //在增加高亮之前 在当前页面将所有的类移除
            $(selector).addClass(&quot;highlight&quot;); //对前面所选中的元素追加css类
        &#125;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="Ajax-Asynchronous-JavaScript-And-XML-介绍"><a href="#Ajax-Asynchronous-JavaScript-And-XML-介绍" class="headerlink" title="Ajax(Asynchronous JavaScript And XML)介绍"></a>Ajax(Asynchronous JavaScript And XML)介绍</h3><p>Ajax(异步的 <strong>JavaScript</strong> 和 <strong>XML</strong>)</p>
<ul>
<li>Ajax可以**<u><span style = "color : red">在不刷新页面的前提下，进行页面布局更新，与后台交互</span></u>**<br>[不对整个页面刷新 只对局部数据更新刷新]</li>
<li>Ajax不是新技术，不是W3C的标准</li>
</ul>
<h4 id="Ajax的使用流程"><a href="#Ajax的使用流程" class="headerlink" title="Ajax的使用流程"></a>Ajax的使用流程</h4><ul>
<li>创建<strong>XmlHttpRequest</strong>对象[用于后台与服务器交换数据 是Ajax的核心]</li>
<li>发送Ajax请求</li>
<li>处理服务器响应</li>
</ul>
<h6 id="创建XmlHttpRequest对象"><a href="#创建XmlHttpRequest对象" class="headerlink" title="创建XmlHttpRequest对象"></a>创建XmlHttpRequest对象</h6><pre><code class="java">// 1.创建XmlHttpRequest对象
     var xmlhttp;
      if(windows.XMLHttpRequest)&#123;
       xmlhttp = new XMLHttpRequest();
    &#125;else&#123;
       xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
    &#125;
</code></pre>
<h6 id="发送Ajax请求"><a href="#发送Ajax请求" class="headerlink" title="发送Ajax请求"></a>发送Ajax请求</h6><ul>
<li><strong>xmlhttp.open()</strong> 用于创建请求</li>
</ul>
<pre><code class="java">//创建请求
xmlhttp.open(&quot;Get&quot;,&quot;http://localhost/test?name=admin&quot;,true);
//发送到服务器
xmlhttp.send();
</code></pre>
<h6 id="处理服务器响应"><a href="#处理服务器响应" class="headerlink" title="处理服务器响应"></a>处理服务器响应</h6><ul>
<li><strong>xmlhttp.onreadystatechange()</strong> 事件用于监听Ajax的执行过程</li>
<li><strong>xmlhttp.readyState &#x3D; “<u>number</u>“</strong> 属性说明XMLHttpRequest当前状态</li>
<li>xmlhttp.status 属性服务器响应状态码，200:成功 404:未找到</li>
</ul>
<table>
<thead>
<tr>
<th align="center">readyState指</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">readyState &#x3D; 0</td>
<td align="center">请求未初始化</td>
</tr>
<tr>
<td align="center">readyState &#x3D; 1</td>
<td align="center">服务器连接已建立</td>
</tr>
<tr>
<td align="center">readyState &#x3D; 2</td>
<td align="center">请求已被接收</td>
</tr>
<tr>
<td align="center">readyState &#x3D; 3</td>
<td align="center">请求正在处理</td>
</tr>
<tr>
<td align="center">readyState &#x3D; 4</td>
<td align="center">响应文本已被接收</td>
</tr>
</tbody></table>
<h6 id="完整编写"><a href="#完整编写" class="headerlink" title="完整编写"></a>完整编写</h6><pre><code class="html">&lt;body&gt;
    &lt;input id=&quot;btnLoad&quot; type=&quot;button&quot; value=&quot;加载&quot;&gt;
    &lt;div id=&quot;divContent&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
        document.getElementById(&quot;btnLoad&quot;).onclick = function()&#123;
            //1.创建XmlHttpRequest对象
            var xmlhttp;
            if(windows.XMLHttpRequest)&#123;
                xmlhttp = new XMLHttpRequest();
            &#125;else&#123;
                xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
            &#125;
            console.log(xmlhttp); //在控制台console里有数据
            //2.发送Ajax请求 //F12中Network content有Response返回
            xmlhttp.open(&quot;GET&quot;, &quot;/json_war_exploded/news.html&quot;, true)
            //3.处理服务器响应
            xmlhttp.onreadystatechange = function()&#123;
            //响应已被接收且服务器处理成功时才执行
                if(xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200)&#123;
                //获取响应体的文本
                var responseText = xmlhttp.responseText;
                //对服务器结果进行处理 
                alert(t);
                //点击加载后 数据输出在页面的div上
                document.getElementById(&quot;divContent&quot;).innerHTML = t;
                &#125;
            &#125;
        &#125;
    &lt;/script&gt;
&lt;/body&gt;
</code></pre>
<pre><code class="java">ContentServlet.java
@WebServlet(&quot;/content&quot;)
public class ContentServlet extends HttpServlet&#123;
    public ContentServlet()&#123;
        super();
    &#125;
    //用Ajax进行请求的时候不进行任何页面跳转而是直接输出想产生的数据结果[一般用JSON传递]
    protected void doGet(HttpServletReq req, HttpServletRespon res)&#123;
        res.getWritre().println(&quot;&lt;b style = &#39;color:red&#39;&gt;I&#39;m server content&lt;/b&gt;&quot;);
    &#125;
&#125;
</code></pre>
<h3 id="利用Ajax实现新闻列表-案例"><a href="#利用Ajax实现新闻列表-案例" class="headerlink" title="利用Ajax实现新闻列表[案例]"></a>利用Ajax实现新闻列表[案例]</h3><p>需要下载fast json-1.2.52.jar</p>
<pre><code class="java">News.java
public class News()&#123;
    private String title;
    private String date;
    private String source;
    private String content;
    Getter and Setter + Constructor
&#125;
</code></pre>
<pre><code class="java">NewsListServlet.java
@WebServlet(&quot;/news_list&quot;)
public class NewsListServlet extends HttpServlet&#123;
    public NewsListServlet()&#123;
        super();
    &#125;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
        List list = new ArrayList();
        list.add(new News(&quot;TIOBE:2023年9月份日本排放核污染水&quot;,&quot;2020-9&quot;,&quot;TIOBE&quot;,&quot;...&quot;));
        list.add(new News(&quot;TIOBE:2023年9月份日本排放核污染水&quot;,&quot;2020-9&quot;,&quot;TIOBE&quot;,&quot;...&quot;));
        list.add(new News(&quot;TIOBE:2023年9月份日本排放核污染水&quot;,&quot;2020-9&quot;,&quot;TIOBE&quot;,&quot;...&quot;));
        list.add(new News(&quot;TIOBE:2023年9月份日本排放核污染水&quot;,&quot;2020-9&quot;,&quot;TIOBE&quot;,&quot;...&quot;));
        //用于把List或者java对象給json序列化生成对应的字符串
        String json = JSON.toJSONString(list); //提供的java对象
        System.out.println(json);
        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);
        resp.getWriter().println(json);
    &#125;
&#125;
</code></pre>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;container&quot;&gt;
&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
        //1.创建XmlHttpRequest对象
        var xmlhttp;
        if(window.XMLHttpRequest)&#123;
            xmlhttp = new XMLHttpRequest();
        &#125;else&#123;
            xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
        &#125;
        //2.发送Ajax请求 //F12中Network content有Response返回
        //true代表异步执行 false代表同步执行
        xmlhttp.open(&quot;GET&quot;, &quot;/json_war_exploded/news_list&quot;, false)
        //同步：在网络发布的过程中 数据没有返回的话会一直处于阻塞的状态(前面的没做完后面的不让做)
        xmlhttp.send();
        console.log(&quot;请求发送完成&quot;);
        if(xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200) &#123;
            //获取响应体的文本
            var text = xmlhttp.responseText;
            //对服务器结果进行处理
            console.log(text);
            var json = JSON.parse(text);//内置的json对象
            console.log(json);
            var html = &quot;&quot;;
            for (var i = 0; i &lt; json.length; i++) &#123;
                var news = json[i];
                html = html + &quot;&lt;h1&gt;&quot; + news.title + &quot;&lt;/h1&gt;&quot;;
                html = html + &quot;&lt;h2&gt;&quot; + news.date + &quot;&amp;nbsp&quot; + news.source + &quot;&lt;/h2&gt;&quot;;
                html = html + &quot;&lt;hr/&gt;&quot;
            &#125;
            document.getElementById(&quot;container&quot;).innerHTML = html;
        &#125;
        /*3.处理服务器响应 异步[一直往下进行 onreadystatechange数据监控]
        xmlhttp.onreadystatechange = function()&#123;
            //响应已被接收且服务器处理成功时才执行
            if(xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200)&#123;
                //获取响应体的文本
                var text = xmlhttp.responseText;
                //对服务器结果进行处理
                console.log(text);
                var json = JSON.parse(text);//内置的json对象
                console.log(json);
                var html = &quot;&quot;;
                for (var i = 0; i &lt; json.length; i++) &#123;
                    var news = json[i];
                    html = html + &quot;&lt;h1&gt;&quot; + news.title + &quot;&lt;/h1&gt;&quot;;
                    html = html + &quot;&lt;h2&gt;&quot; + news.date + &quot;&amp;nbsp&quot; + news.source + &quot;&lt;/h2&gt;&quot;;
                    html = html + &quot;&lt;hr/&gt;&quot;;
                &#125;
                //对html进行动态加载
                document.getElementById(&quot;container&quot;).innerHTML = html;
            &#125;
        &#125;*/
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h3><p><strong>xmlhttp</strong>.open(“GET”, “&#x2F;json_war_exploded&#x2F;news_list”, <strong>false</strong>)</p>
<p>**同步(false)**：程序会阻塞 进入等待的状态 数据不返回时程序是不会往下进行的<br><strong>异步(true)</strong>[<u>推荐</u>]：程序不会阻塞 程序依旧往下进行 数据返回是通过触发onreadystatechange数据监控进行处理的</p>
<pre><code class="java">//    2.发送Ajax请求 //F12中Network content有Response返回
        //true代表异步执行 false代表同步执行
        xmlhttp.open(&quot;GET&quot;, &quot;/json_war_exploded/news_list&quot;, false)
        //同步：在网络发布的过程中 数据没有返回的话会一直处于阻塞的状态(前面的没做完后面的不让做)
        xmlhttp.send();
        console.log(&quot;请求发送完成&quot;);
        if(xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200) &#123;
            //获取响应体的文本
            var text = xmlhttp.responseText;
            //对服务器结果进行处理
            console.log(text);
            var json = JSON.parse(text);//内置的json对象
            console.log(json);
            var html = &quot;&quot;;
            for (var i = 0; i &lt; json.length; i++) &#123;
                var news = json[i];
                html = html + &quot;&lt;h1&gt;&quot; + news.title + &quot;&lt;/h1&gt;&quot;;
                html = html + &quot;&lt;h2&gt;&quot; + news.date + &quot;&amp;nbsp&quot; + news.source + &quot;&lt;/h2&gt;&quot;;
                html = html + &quot;&lt;hr/&gt;&quot;
            &#125;
            document.getElementById(&quot;container&quot;).innerHTML = html;
        &#125;
        /*3.处理服务器响应 异步[一直往下进行 onreadystatechange数据监控]
        xmlhttp.onreadystatechange = function()&#123;
            //响应已被接收且服务器处理成功时才执行
            if(xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200)&#123;
                //获取响应体的文本
                var text = xmlhttp.responseText;
                //对服务器结果进行处理
                console.log(text);
                var json = JSON.parse(text);//内置的json对象
                console.log(json);
                var html = &quot;&quot;;
                for (var i = 0; i &lt; json.length; i++) &#123;
                    var news = json[i];
                    html = html + &quot;&lt;h1&gt;&quot; + news.title + &quot;&lt;/h1&gt;&quot;;
                    html = html + &quot;&lt;h2&gt;&quot; + news.date + &quot;&amp;nbsp&quot; + news.source + &quot;&lt;/h2&gt;&quot;;
                    html = html + &quot;&lt;hr/&gt;&quot;;
                &#125;
                //对html进行动态加载
                document.getElementById(&quot;container&quot;).innerHTML = html;
            &#125;
        &#125;*/
</code></pre>
<hr>
<pre><code class="html">&lt;button type = &quot;button&quot; onclick=&quot;loadXMLDoc()&quot;&gt;修改内容&lt;/button&gt;
&lt;script&gt;
/* XMLHttpRequest 用于在后台与服务器交换数据。
这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。
所有现代浏览器（IE7+、Firefox、Chrome、Safari 以及 Opera）均内建 XMLHttpRequest 对象。
*/ 
function loadXMLDoc()&#123;
    //AJAX脚本执行
    var xmlhttp;
    if(windows.XMLHttpRequest)&#123;
        xmlhttp=new XMLHttpRequest();
    &#125;else&#123;
        xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
    &#125;
&#125;
&lt;/script&gt;

/*
如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法：

open(method,url,async)
method：请求的类型；GET 或 POST
url：文件在服务器上的位置
async：true（常用异步）或 false（同步）

对于 web 开发人员来说，发送异步请求是一个巨大的进步。
很多在服务器执行的任务都相当费时。AJAX 出现之前，这可能会引起应用程序挂起或停止。
通过 AJAX，JavaScript 无需等待服务器的响应，而是：
在等待服务器响应时执行其他脚本
当响应就绪后对响应进行处理
*/ 

xmlhttp.open(&quot;GET&quot;,&quot;ajax_info.html&quot;,true);
xmlhttp.send(); //send(string) 仅用于POST请求 

/*
若需要来自服务器的响应，请使用XMLHttpRequest对象的responseText或responseXML属性 
responseText =&gt; 获得字符串形式的相应数据 如果来自服务器的响应并非XML
responseXML =&gt; 获得XML形式的相应数据 如果来自服务器的响应式XML 
*/ 
// responseText 
document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;
// responseXML
xmlDoc=xmlhttp.responseXML;
txt=&quot;&quot;;
x=xmlDoc.getElementsByTagName(&quot;ARTIST&quot;);
    for (i=0;i&lt;x.length;i++)
    &#123;
        txt=txt + x[i].childNodes[0].nodeValue + &quot;&lt;br&gt;&quot;;
    &#125;
document.getElementById(&quot;myDiv&quot;).innerHTML=txt;
/*onreadystatechange事件中我们规定当服务器响应已做好被处理的准备时所执行的任务
0:请求未初始化  1:服务器连接已建立  2:请求已接收  3:请求处理中  4:请求已完成且响应已就绪 
 */ 
 //如果您的网站上存在多个 AJAX 任务，那么您应该为创建 XMLHttpRequest对象编写一个标准的函数
 //并为每个 AJAX 任务调用该函数 
 xmlhttp.onreadystatechange=function()
&#123;
    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)
    &#123;
        document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="jQuery对Ajax的支持"><a href="#jQuery对Ajax的支持" class="headerlink" title="jQuery对Ajax的支持"></a>jQuery对Ajax的支持</h3><ul>
<li>jQuery对Ajax进行封装，提供了**$.ajax()**方法</li>
<li>语法：**$.ajax(options)**</li>
</ul>
<table>
<thead>
<tr>
<th align="center">常用设置项</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>url</strong></td>
<td align="center">发送请求地址</td>
</tr>
<tr>
<td align="center"><strong>type</strong></td>
<td align="center">请求类型get|post</td>
</tr>
<tr>
<td align="center"><strong>data</strong></td>
<td align="center">向服务器传递的参数</td>
</tr>
<tr>
<td align="center"><strong>dataType</strong></td>
<td align="center">服务器响应的数据类型<br />text|<strong>json</strong>|xml|html|jsonp|script</td>
</tr>
<tr>
<td align="center"><strong>success</strong></td>
<td align="center">接收响应时的处理函数</td>
</tr>
<tr>
<td align="center"><strong>error</strong></td>
<td align="center">请求失败时的处理函数</td>
</tr>
</tbody></table>
<pre><code class="html">jquery_news.html
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.1.1.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        $(function () &#123;
            $.ajax(&#123;
                &quot;url&quot;: &quot;/json_war_exploded/news_list&quot;,
                &quot;type&quot;: &quot;get&quot;,
                &quot;data&quot;: &quot;t=tiobe&quot;,//多个传参的参数用json格式写
                //&quot;data&quot;: &#123;&quot;t&quot;:&quot;tiobe&quot;, &quot;abc&quot;:&quot;123&quot;, &quot;uu&quot;:&quot;777&quot;&#125;
                //但是实际过程中jquery会以url形式传参 t=tiobe&amp;abc=123&amp;uu=777
                &quot;dataType&quot;: &quot;json&quot;, //解析成json文件
                &quot;success&quot;: function (json)&#123;
                    console.log(json);
                    for (var i = 0; i &lt; json.length; i++)&#123;
                        $(&quot;#container&quot;).append(&quot;&lt;h1&gt;&quot; + json[i].title + &quot;&lt;/h1&gt;&quot;); //append追加
                    &#125;
                &#125;,   //ajax的核心信息 ↓
                &quot;error&quot;: function (xmlhttp, errorText)&#123;
                    console.log(xmlhttp);
                    console.log(errorText);
                    if(xmlhttp.status == &quot;405&quot;)&#123;
                        alert(&quot;无效的请求方式&quot;);
                    &#125;else if(xmlhttp.status == &quot;404&quot;)&#123;
                        alert(&quot;未找到URL资源&quot;);
                    &#125;else if(xmlhttp.status == &quot;500&quot;)&#123;
                        alert(&quot;服务器内部错误，请联系管理员&quot;);
                    &#125;else&#123;
                        alert(&quot;产生异常，请联系管理员&quot;);
                    &#125;
                &#125;
            &#125;)
        &#125;)
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id = &quot;container&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="实现二级联动菜单-省-市-县"><a href="#实现二级联动菜单-省-市-县" class="headerlink" title="实现二级联动菜单 [省 市 县]"></a>实现二级联动菜单 [省 市 县]</h3><pre><code class="java">ChannelServlet.java
package com.example.json;

import com.alibaba.fastjson.JSON;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

@WebServlet(&quot;/channel&quot;)
public class ChannelServlet extends HttpServlet &#123;
    public ChannelServlet() &#123;
    &#125;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
        String level = req.getParameter(&quot;level&quot;);
        String parent = req.getParameter(&quot;parent&quot;);
        List chlist = new ArrayList();
        if(level.equals(&quot;1&quot;)) &#123;
            chlist.add(new Channel(&quot;ai&quot; , &quot;前沿/区块链/人工智能&quot;));
            chlist.add(new Channel(&quot;web&quot; , &quot;前端/小程序/JS&quot;));
        &#125;else if(level.equals(&quot;2&quot;)) &#123;
            if(parent.equals(&quot;ai&quot;)) &#123;
                chlist.add(new Channel(&quot;micro&quot; , &quot;微服务&quot;));
                chlist.add(new Channel(&quot;blockchain&quot; , &quot;区块链&quot;));
                chlist.add(new Channel(&quot;other&quot; , &quot;...&quot;));
            &#125;else if(parent.equals(&quot;web&quot;))&#123;
                chlist.add(new Channel(&quot;html&quot; , &quot;HTML&quot;));
                chlist.add(new Channel(&quot;css&quot; , &quot;CSS&quot;));
                chlist.add(new Channel(&quot;other&quot; , &quot;...&quot;));
            &#125;
        &#125;
        //json序列化
        String json = JSON.toJSONString(chlist);
        resp.setContentType(&quot;text/html;charset=utf-8&quot;);
        resp.getWriter().println(json);
    &#125;
&#125;
</code></pre>
<pre><code class="html">cascade_menu.html
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.1.1.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        $(function()&#123;
            $.ajax(&#123;
                &quot;url&quot; : &quot;/json_war_exploded/channel&quot;,
                &quot;data&quot; : &#123;&quot;level&quot; : &quot;1&quot;&#125;,
                &quot;type&quot; : &quot;get&quot; ,
                &quot;dataType&quot; : &quot;json&quot; ,
                &quot;success&quot; : function(json)&#123;
                    console.log(json);
                    for(var i = 0 ; i &lt; json.length ; i++)&#123;
                        var ch = json[i];
                        //append是在组件内部进行追加内容
                        $(&quot;#lv1&quot;).append(&quot;&lt;option value=&#39;&quot; + ch.code + &quot;&#39;&gt;&quot; + ch.name + &quot;&lt;/option&gt;&quot;)
                    &#125;
                &#125;
            &#125;)
        &#125;)

        $(function()&#123; //on是绑定事件 change是当变化时候发生function
            $(&quot;#lv1&quot;).on(&quot;change&quot; , function()&#123;
                var parent = $(this).val();//val()获取输入项的值
                console.log(parent);
                $.ajax(&#123;
                    &quot;url&quot; : &quot;/json_war_exploded/channel&quot; ,
                    &quot;data&quot; : &#123;&quot;level&quot; : &quot;2&quot; , &quot;parent&quot; : parent&#125;, //parent 一级频道的value值
                    &quot;dataType&quot; : &quot;json&quot; ,
                    &quot;type&quot; : &quot;get&quot; ,
                    &quot;success&quot; : function(json)&#123;
                        console.log(json);
                        //移除所有lv2下的原始option选项
                        $(&quot;#lv2&gt;option&quot;).remove();
                        for(var i = 0 ; i &lt; json.length ; i++)&#123;
                            var ch = json[i];
                            $(&quot;#lv2&quot;).append(&quot;&lt;option value=&#39;&quot; + ch.code +&quot;&#39;&gt;&quot; + ch.name + &quot;&lt;/option&gt;&quot;)
                        &#125;
                    &#125;
                &#125;)
            &#125;)
        &#125;)
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;select id=&quot;lv1&quot; style=&quot;width:200px;height:30px&quot;&gt;
    &lt;option selected=&quot;selected&quot;&gt;请选择&lt;/option&gt;
&lt;/select&gt;
&lt;select id=&quot;lv2&quot; style=&quot;width:200px;height:30px&quot;&gt;&lt;/select&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><ul>
<li>正则表达式是检查、匹配字符串的表达式</li>
<li>正则表达式是描述规则、主流语言都有良好支持</li>
<li>字符串校验、查找与替换是正则表达式主要使用场景</li>
</ul>
<h6 id="正则表达式的案例"><a href="#正则表达式的案例" class="headerlink" title="正则表达式的案例"></a>正则表达式的案例</h6><ul>
<li>检查输入的身份证号是否合法(15位、18位)</li>
<li>示例：13010220200328091x</li>
</ul>
<pre><code class="java">正则表达式：(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)
</code></pre>
<h3 id="字符范围匹配"><a href="#字符范围匹配" class="headerlink" title="字符范围匹配"></a>字符范围匹配</h3><table>
<thead>
<tr>
<th align="center">正则表达式</th>
<th align="center">说明</th>
<th align="center">正确</th>
<th align="center">错误</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">精准匹配单个字符</td>
<td align="center">A</td>
<td align="center">a</td>
</tr>
<tr>
<td align="center">x|y</td>
<td align="center">允许出现的2个字符</td>
<td align="center">y</td>
<td align="center">n</td>
</tr>
<tr>
<td align="center">[xyz]</td>
<td align="center">字符集合,允许出现集合内任意单个字符</td>
<td align="center">z</td>
<td align="center">c</td>
</tr>
<tr>
<td align="center">[a-z] [A-Z] [0-9]</td>
<td align="center">字符范围</td>
<td align="center">a D 8</td>
<td align="center">A a A</td>
</tr>
<tr>
<td align="center">[^xyz] [‘^0-9]</td>
<td align="center">集合内字符不允许出现</td>
<td align="center">0 A</td>
<td align="center">y 8</td>
</tr>
</tbody></table>
<h6 id="训练题目"><a href="#训练题目" class="headerlink" title="训练题目"></a>训练题目</h6><ul>
<li>精准匹配字符串”hallo” 或者 “hello” &#x3D;&gt; h**[ae]**llo</li>
<li>请匹配数字范围(0570-0579) &#x3D;&gt; 057[<strong>0-9</strong>]</li>
<li>单选题只允许输入ABCD其中一项 &#x3D;&gt; [<strong>ABCD</strong>] &#x2F; [<strong>A-D</strong>]</li>
</ul>
<h3 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h3><table>
<thead>
<tr>
<th align="center">正则表达式</th>
<th align="center">说明</th>
<th align="center">正确</th>
<th align="center">错误</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\d</td>
<td align="center">匹配任意单个数字</td>
<td align="center">8</td>
<td align="center">i</td>
</tr>
<tr>
<td align="center">\D</td>
<td align="center">匹配\d规则之外的任意单个字符</td>
<td align="center">i</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">\w</td>
<td align="center">匹配任意单个字母数字下划线</td>
<td align="center">Y</td>
<td align="center">&amp;</td>
</tr>
<tr>
<td align="center">\W</td>
<td align="center">匹配\w之外的任意单个字符</td>
<td align="center">&amp;</td>
<td align="center">Y</td>
</tr>
<tr>
<td align="center">\s</td>
<td align="center">匹配单个空格</td>
<td align="center"></td>
<td align="center">x</td>
</tr>
<tr>
<td align="center">\n</td>
<td align="center">匹配单个换行符</td>
<td align="center"></td>
<td align="center">x</td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">匹配任意单个字符(换行符除外)</td>
<td align="center">–</td>
<td align="center">–</td>
</tr>
<tr>
<td align="center">\。</td>
<td align="center">特殊字符,只匹配 “.”</td>
<td align="center">.</td>
<td align="center">1</td>
</tr>
</tbody></table>
<h6 id="训练题目-1"><a href="#训练题目-1" class="headerlink" title="训练题目"></a>训练题目</h6><ul>
<li><p>请匹配数字(3213.383219)</p>
<pre><code class="java">\d\d\d\d\.\d\d\d\d\d\d\d
</code></pre>
</li>
<li><p>匹配杭州与宁波的座机号码(0571|0574-XXXXXXXX)</p>
<pre><code class="java">057[14]-\d\d\d\d\d\d\d\d
</code></pre>
</li>
<li><p>请匹配18位身份证号 [第一位1~6和8]</p>
<pre><code class="java">[1234568]\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d[0-9xX]
</code></pre>
</li>
</ul>
<h3 id="多次重复匹配"><a href="#多次重复匹配" class="headerlink" title="多次重复匹配"></a>多次重复匹配</h3><table>
<thead>
<tr>
<th align="center">正则表达式</th>
<th align="center">说明</th>
<th align="center">正确</th>
<th align="center">错误</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A{3}</td>
<td align="center">精准N次匹配</td>
<td align="center">AAA</td>
<td align="center">AA</td>
</tr>
<tr>
<td align="center">A{3,}</td>
<td align="center">最少出现N</td>
<td align="center">AAA</td>
<td align="center">AA</td>
</tr>
<tr>
<td align="center">\d{3,5}</td>
<td align="center">约定出现最少次数与最大次数</td>
<td align="center">1234</td>
<td align="center">12</td>
</tr>
<tr>
<td align="center">\d*</td>
<td align="center">可以出现零次至无限次,相当于{0,}</td>
<td align="center">1234</td>
<td align="center">–</td>
</tr>
<tr>
<td align="center">\d+</td>
<td align="center">最少出现一次, 相当于{1,}</td>
<td align="center">12</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\d?</td>
<td align="center">最多出现一次, 相当于{0,1}</td>
<td align="center">1</td>
<td align="center">12</td>
</tr>
</tbody></table>
<h6 id="联系题目"><a href="#联系题目" class="headerlink" title="联系题目"></a>联系题目</h6><ul>
<li><p>验证短信验证码(6位数字) &#x3D;&gt; <strong>\d[6]</strong></p>
</li>
<li><p>请匹配全国座机号(区号3或4位-电话号码7或8位) &#x3D;&gt; <strong>\d[3,4]-\d[7,8]</strong></p>
</li>
<li><p>请匹配英文姓名(例如：James Watson)</p>
<pre><code class="java">[A-Z][a-z]&#123;1,&#125;\s[A-Z][a-z]&#123;0,&#125;
[A-Z][a-z]&#123;1,&#125;\s[A-Z][a-z]*
^[A-Z][a-z]&#123;1,&#125;+\s[A-Z][a-z]*$
</code></pre>
</li>
</ul>
<h3 id="定位匹配"><a href="#定位匹配" class="headerlink" title="定位匹配"></a>定位匹配</h3><table>
<thead>
<tr>
<th align="center">正则表达式</th>
<th align="center">说明</th>
<th align="center">正确</th>
<th align="center">错误</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>^A.</strong>*</td>
<td align="center"><span style = "color : red"><strong>头匹配</strong></span></td>
<td align="center">ABC</td>
<td align="center">CBA</td>
</tr>
<tr>
<td align="center">**.<em>A$</em>*</td>
<td align="center"><span style = "color : red"><strong>尾匹配</strong></span></td>
<td align="center">CBA</td>
<td align="center">ABC</td>
</tr>
<tr>
<td align="center">^A.*A$</td>
<td align="center">全字匹配</td>
<td align="center">ACCCA</td>
<td align="center">ACCCB</td>
</tr>
</tbody></table>
<pre><code class="java">abb123123ab =&gt; ^ab.*ab$
</code></pre>
<h3 id="贪婪模式-默认匹配规则"><a href="#贪婪模式-默认匹配规则" class="headerlink" title="贪婪模式[默认匹配规则]"></a>贪婪模式[默认匹配规则]</h3><ul>
<li>在满足条件的情况下尽可能<strong>多</strong>匹配到字符串</li>
<li>示例：111222333     正则：<strong>\d{6,8}</strong></li>
<li>匹配结果：11122233</li>
</ul>
<h3 id="非贪婪模式"><a href="#非贪婪模式" class="headerlink" title="非贪婪模式"></a>非贪婪模式</h3><ul>
<li><p>在满足条件的情况下尽可能<strong>少</strong>匹配到字符串</p>
</li>
<li><p>示例：111222333     正则：<strong>\d{6,8}？</strong></p>
</li>
<li><p>匹配结果：111222</p>
</li>
</ul>
<h6 id="贪婪模式举例"><a href="#贪婪模式举例" class="headerlink" title="贪婪模式举例"></a>贪婪模式举例</h6><pre><code class="java">&lt;a href = &quot;www.baidu.com&quot;&gt; 百度 &lt;/a&gt; &lt;a href =  &quot;www.baidu.com&quot;&gt;新浪&lt;/a&gt;
规则: 想搜索&quot;www.baidu.com&quot; 仅此一个从&quot;开始 从&quot;结束 中间的片段
正则表达式: &quot;.*&quot; 由于默认是贪婪模式 它会找到的结果如下
&quot;www.baidu.com&quot;&gt; 百度 &lt;/a&gt; &lt;a href = “www.sina.com”

改成非贪婪模式 正则表达式：&quot;.*?&quot;
&quot;www.baidu.com&quot;  &quot;www.baidu.com&quot;
</code></pre>
<h3 id="表达式分组"><a href="#表达式分组" class="headerlink" title="表达式分组"></a>表达式分组</h3><ul>
<li>分组将”正则”分组为多个子表达式</li>
<li>示例：abababcdcdcd</li>
<li>正则表达式：(ab){3}(cd){3}</li>
</ul>
<h6 id="训练题目-2"><a href="#训练题目-2" class="headerlink" title="训练题目"></a>训练题目</h6><ul>
<li><p>匹配验证码(4位或6位)</p>
<pre><code class="java">(^\d&#123;4&#125;$)|(^\d&#123;6&#125;$)
</code></pre>
</li>
<li><p>匹配车牌号(冀B-U888G)</p>
<pre><code class="java">^([冀黑粤晋][A-Z])-([A-Z0-9]&#123;5&#125;)$
</code></pre>
</li>
<li><p>中文名字匹配 [Unicall码] [张三…]</p>
<pre><code class="java">^[\u4e00-\u9fa5]&#123;2,8&#125;$
</code></pre>
</li>
<li><p>中英文名字匹配</p>
<pre><code class="java">(^[\u4e00-\u9fa5]&#123;2,8&#125;$)|(^[A-Z][a-z]*$)
</code></pre>
</li>
</ul>
<h3 id="正则表达式验证JavaScript表单"><a href="#正则表达式验证JavaScript表单" class="headerlink" title="正则表达式验证JavaScript表单"></a>正则表达式验证JavaScript表单</h3><pre><code class="html">&lt;body&gt;
    &lt;form action=&quot;#&quot; method=&quot;post&quot; id=&quot;frmInfo&quot;&gt;
        &lt;div id=&quot;err&quot; style=&quot;color : red&quot;&gt;
            
        &lt;/div&gt; 
        &lt;div&gt;
            姓名: &lt;input id=&quot;name&quot; name=&quot;name&quot;/&gt;
        &lt;/div&gt;
        &lt;div&gt;
            身份证: &lt;input id=&quot;idno&quot; name=&quot;idno&quot;/&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;input type=&quot;submit&quot;/&gt;
        &lt;/div&gt;
    &lt;/form&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        document.getElementById(&quot;frmInfo&quot;).onsubmit = function()&#123;
            //在JS中定义正则表达式对象只需要在 /正则表达式/
            var regex1 = /^[\u4e00-\u9fa5]&#123;2,8&#125;$/
            var regex2 = /^rehextal
            var name = document.getElementById(&quot;name&quot;).value;
            var idno = document.getElementByid(&quot;inamd&quot;)
            if(regex1.test(name)==false); //返回true或false校验是否成功
                document.getElementById(&quot;err&quot;).innerHTM=&quot;无效姓名&quot;;
                return false;
            &#125;else if(regx2.test(idno) == false)&#123;
                document.getElementById(&quot;err&quot;).innerHTM=&quot;无效身份证号&quot;;
            &#125;else&#123;
                alert(&quot;验证通过准备提交&quot;)
                return true;
            &#125;
    &lt;/script&gt;
&lt;/body&gt;
</code></pre>
<h4 id="Java中web页面信息提取"><a href="#Java中web页面信息提取" class="headerlink" title="Java中web页面信息提取"></a>Java中web页面信息提取</h4><pre><code class="html">sample.html
&lt;!DOCTYPEhtml&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;国际主要城市&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;国际主要城市&lt;/h1&gt;
    &lt;ul&gt;
        &lt;li&gt;纽约NewYork&lt;/li&gt;
        &lt;li&gt;伦敦London&lt;/li&gt;
        &lt;li&gt;东京Tokyo&lt;/li&gt;
        &lt;li&gt;巴黎Paris&lt;/li&gt;
        &lt;li&gt;香港HongKong&lt;/li&gt;
        &lt;li&gt;新加坡Singapore&lt;/li&gt;
        &lt;li&gt;悉尼Sydney&lt;/li&gt;
        &lt;li&gt;米兰Milano&lt;/li&gt;
        &lt;li&gt;上海Shanghai&lt;/li&gt;
        &lt;li&gt;北京Beijing&lt;/li&gt;
        &lt;li&gt;马德里Madrid&lt;/li&gt;
        &lt;li&gt;莫斯科Moscow&lt;/li&gt;
        &lt;li&gt;首尔Seoul&lt;/li&gt;
        &lt;li&gt;曼谷Bangkok&lt;/li&gt;
        &lt;li&gt;多伦多Toronto&lt;/li&gt;
        &lt;li&gt;布鲁塞尔Brussels&lt;/li&gt;
        &lt;li&gt;芝加哥Chicago&lt;/li&gt;
        &lt;li&gt;吉隆坡KualaLumpur&lt;/li&gt;
        &lt;li&gt;孟买Mumbai&lt;/li&gt;
        &lt;li&gt;华沙Warsaw&lt;/li&gt;
        &lt;li&gt;圣保罗SaoPaulo&lt;/li&gt;
        &lt;li&gt;苏黎世Zurich&lt;/li&gt;
        &lt;li&gt;阿姆斯特丹Amsterdam&lt;/li&gt;
        &lt;li&gt;墨西哥城MexicoCity&lt;/li&gt;
        &lt;li&gt;雅加达Jakarta&lt;/li&gt;
        &lt;li&gt;都柏林Dublin&lt;/li&gt;
        &lt;li&gt;曼谷Bangkok&lt;/li&gt;
        &lt;li&gt;台北Taipei&lt;/li&gt;
        &lt;li&gt;伊斯坦布尔Istanbul&lt;/li&gt;
        &lt;li&gt;里斯本Lisbon&lt;/li&gt;
        &lt;li&gt;罗马Rome&lt;/li&gt;
        &lt;li&gt;法兰克福Frankfurt&lt;/li&gt;
        &lt;li&gt;斯德哥尔摩Stockholm&lt;/li&gt;
        &lt;li&gt;布拉格Prague&lt;/li&gt;
        &lt;li&gt;维也纳Vienna&lt;/li&gt;
        &lt;li&gt;布达佩斯Budapest&lt;/li&gt;
        &lt;li&gt;雅典Athens&lt;/li&gt;
        &lt;li&gt;加拉加斯Caracas&lt;/li&gt;
        &lt;li&gt;洛杉矶LosAngeles&lt;/li&gt;
        &lt;li&gt;新西兰NewZealand&lt;/li&gt;
        &lt;li&gt;圣地亚哥SanDiego&lt;/li&gt;
        &lt;li&gt;布宜诺斯艾利斯BuenosAires&lt;/li&gt;
        &lt;li&gt;华盛顿Washington&lt;/li&gt;
        &lt;li&gt;墨尔本Melbourne&lt;/li&gt;
        &lt;li&gt;约翰内斯堡Johannesburg&lt;/li&gt;
        &lt;li&gt;亚特兰大Atlanta&lt;/li&gt;
        &lt;li&gt;巴塞罗那Barcelona&lt;/li&gt;
        &lt;li&gt;旧金山SanFrancisco&lt;/li&gt;
        &lt;li&gt;马尼拉Manila&lt;/li&gt;
        &lt;li&gt;波哥大Bogota&lt;/li&gt;
        &lt;li&gt;特拉维夫TelAviv-Yafo&lt;/li&gt;
        &lt;li&gt;新德里NewDelhi&lt;/li&gt;
        &lt;li&gt;迪拜Dubai&lt;/li&gt;
        &lt;li&gt;布加勒斯特Bucharest&lt;/li&gt;
        &lt;li&gt;奥斯陆Oslo&lt;/li&gt;
        &lt;li&gt;柏林Berlin&lt;/li&gt;
        &lt;li&gt;赫尔辛基Helsinki&lt;/li&gt;
        &lt;li&gt;日内瓦Geneva&lt;/li&gt;
        &lt;li&gt;利雅得Riyadh&lt;/li&gt;
        &lt;li&gt;哥本哈根Copenhagen&lt;/li&gt;
        &lt;li&gt;汉堡Hamburg&lt;/li&gt;
        &lt;li&gt;开罗Cairo&lt;/li&gt;
        &lt;li&gt;卢森堡Luxembourg&lt;/li&gt;
        &lt;li&gt;班加罗尔Bangalore&lt;/li&gt;
        &lt;li&gt;达拉斯Dallas&lt;/li&gt;
        &lt;li&gt;科威特城Kuwaitcity&lt;/li&gt;
        &lt;li&gt;波士顿Boston&lt;/li&gt;
        &lt;li&gt;慕尼黑Munich&lt;/li&gt;
        &lt;li&gt;迈阿密Miami&lt;/li&gt;
        &lt;li&gt;利马Lima&lt;/li&gt;
        &lt;li&gt;基辅Kiev&lt;/li&gt;
        &lt;li&gt;休斯顿Houston&lt;/li&gt;
        &lt;li&gt;广州Guangzhou&lt;/li&gt;
        &lt;li&gt;贝鲁特Beirut&lt;/li&gt;
        &lt;li&gt;卡拉奇Karachi&lt;/li&gt;
        &lt;li&gt;索菲亚Sophia&lt;/li&gt;
        &lt;li&gt;蒙得维的亚Montevideo&lt;/li&gt;
        &lt;li&gt;里约热内卢RioDEJaneiro&lt;/li&gt;
        &lt;li&gt;胡志明市HoChiMinhCity&lt;/li&gt;
        &lt;li&gt;蒙特利尔Montreal&lt;/li&gt;
        &lt;li&gt;内罗毕Nairobi&lt;/li&gt;
        &lt;li&gt;巴拿马城Panamacity&lt;/li&gt;
        &lt;li&gt;金奈Chennai&lt;/li&gt;
        &lt;li&gt;布里斯班Brisbane&lt;/li&gt;
        &lt;li&gt;卡萨布兰卡Casablanca&lt;/li&gt;
        &lt;li&gt;丹佛Denver&lt;/li&gt;
        &lt;li&gt;基多Quito&lt;/li&gt;
        &lt;li&gt;斯图加特Stuttgart&lt;/li&gt;
        &lt;li&gt;温哥华Vancouver&lt;/li&gt;
        &lt;li&gt;麦纳麦MaiNaMai&lt;/li&gt;
        &lt;li&gt;危地马拉市Guatemalacity&lt;/li&gt;
        &lt;li&gt;开普敦CapeTown&lt;/li&gt;
        &lt;li&gt;圣何塞SanJose&lt;/li&gt;
        &lt;li&gt;西雅图Seattle&lt;/li&gt;
        &lt;li&gt;深圳Shenzhen&lt;/li&gt;
        &lt;li&gt;珀斯Perth&lt;/li&gt;
        &lt;li&gt;加尔各答Calcutta&lt;/li&gt;
        &lt;li&gt;安特卫普Antwerp&lt;/li&gt;
        &lt;li&gt;费城Philadelphia&lt;/li&gt;
        &lt;li&gt;鹿特丹Rotterdam&lt;/li&gt;
        &lt;li&gt;拉各斯Lagos&lt;/li&gt;
        &lt;li&gt;波特兰Portland&lt;/li&gt;
        &lt;li&gt;底特律Detroit&lt;/li&gt;
        &lt;li&gt;曼彻斯特Manchester&lt;/li&gt;
        &lt;li&gt;惠灵顿Wellington&lt;/li&gt;
        &lt;li&gt;里加Riga&lt;/li&gt;
        &lt;li&gt;爱丁堡Edinburgh&lt;/li&gt;
        &lt;li&gt;圣彼得堡StPetersburg&lt;/li&gt;
        &lt;li&gt;圣迭戈SanDiego&lt;/li&gt;
        &lt;li&gt;伊斯兰堡Islamabad&lt;/li&gt;
        &lt;li&gt;伯明翰Birmingham&lt;/li&gt;
        &lt;li&gt;多哈Doha&lt;/li&gt;
        &lt;li&gt;阿拉木图AlmaAtaAlmaty&lt;/li&gt;
        &lt;li&gt;卡尔加里Calgary&lt;/li&gt;
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="java">RegexSample.java
package com.imooc.regex;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStreamReader;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexSample &#123;
    public static void main(String[] args) &#123;
        StringBuilder content = new StringBuilder();
        try &#123;//读取文件
            FileInputStream fis = new FileInputStream(&quot;D:/workspace/regex/WebContent/sample.html&quot;);
            InputStreamReader isr = new InputStreamReader(fis,&quot;UTF-8&quot;);
            BufferedReader bufferedReader = new BufferedReader(isr);//缓冲提高读取效率
            String lineText = &quot;&quot;;//每一行
            while((lineText = bufferedReader.readLine()) != null) &#123;//读取完成
//                System.out.println(lineText);
                content.append(lineText + &quot;\n&quot;);//追加到后面完整字符串
            &#125;
            bufferedReader.close();
            System.out.println(content);
        
        &#125; catch (Exception e) &#123;
            // TODO Auto-generated catch block
            e.printStackTrace();
        &#125;
        
        //1.创建正则表达式对象 用group进行分组提取
        //[正则表达式字符串] \\两个斜杠是原意输出 +至少出现一次
        Pattern p = Pattern.compile(&quot;&lt;li&gt;([\\u4e00-\\u9fa5]&#123;2,10&#125;)([a-zA-Z]+)&lt;/li&gt;&quot;);
        //2.匹配正则表达式
        Matcher m = p.matcher(content);
        //3.查找匹配的结果
        while(m.find()) &#123;//原始字符串中进行查找 有返回true 无返回false
//            System.out.println(m.group(0)); //完整字符串
            String chs = m.group(1); //group分组
            String eng = m.group(2);
            System.out.println(chs + &quot;-&quot; + eng);
        &#125;
    &#125;
&#125;
</code></pre>
<h1 id="初始过滤器-Filter-机场检查"><a href="#初始过滤器-Filter-机场检查" class="headerlink" title="初始过滤器-Filter [机场检查]"></a>初始过滤器-Filter [机场检查]</h1><ul>
<li>过滤器(Filter)是J2EE Servlet模块下的组件</li>
<li>Filter的作用是对URL进行统一的拦截处理</li>
<li>Filter通常用于应用程序层面进行全局处理</li>
</ul>
<p><img src="https://raw.githubusercontent.com/P-luminary/images/d75b8480442f629a7ae682cbcc3c6d6040d674c6/data/%E8%BF%87%E6%BB%A4%E5%99%A8.png"></p>
<h3 id="开发过滤器三要素"><a href="#开发过滤器三要素" class="headerlink" title="开发过滤器三要素"></a>开发过滤器三要素</h3><ul>
<li>任何过滤器都要实现 <strong>javax.servlet.Filter</strong> 接口</li>
<li>在Filter接口的doFIlter()方法中编写过滤器的功能代码</li>
<li>在web.xml中对过滤器进行配置，说明拦截URL的范围</li>
</ul>
<pre><code class="java">MyFirstFilter.java
public class MyFirstFilter implements Filter&#123;
   public void destroy()&#123;&#125;
   public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
       System.out.println(&quot;过滤器已生效&quot;);
       chain.doFilter(req, resp);
   &#125;
   public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
&#125;
</code></pre>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.MyFirstFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt; //对所有url进行拦截
&lt;/filter-mapping&gt;

&lt;!-- 
    filter-mapping标签用于说明过滤器对URL应用的范围
    1. filter-name 过滤器名称与filter.filter-name保持一致
    2. url-pattern 说明过滤器作用范围 &quot;/*&quot;代表对所有url进行过滤
--&gt;
</code></pre>
<pre><code class="html">&lt;body&gt;
    我是默认首页
&lt;/body&gt;
</code></pre>
<pre><code class="java">HelloServlet.java
@WebServlet(&quot;/hello&quot;)
public class HelloServlet extends HttpServlet&#123;
    public HelloServlet()&#123;&#125;
    protected void doGet(HttpServletReq req, HttpServletResp resp)&#123;
        resp.setContentType(&quot;text/html;charset=utf-8&quot;);
        resp.getWriter().println(&quot;Hello World!!!&quot;)
    &#125;
&#125;
</code></pre>
<h3 id="过滤器的生命周期"><a href="#过滤器的生命周期" class="headerlink" title="过滤器的生命周期"></a>过滤器的生命周期</h3><ul>
<li>初始化init() - <strong>Filter.init()</strong></li>
<li>提供服务 - <strong>Filter.doFilter()</strong></li>
<li>销毁 - <strong>Filter.destroy()</strong></li>
</ul>
<h3 id="过滤器特性"><a href="#过滤器特性" class="headerlink" title="过滤器特性"></a>过滤器特性</h3><ul>
<li>过滤器对象在Web应用启动时被<strong>创建且全局唯一</strong></li>
<li>唯一的过滤器对象在<strong>并发环境</strong>中采用”<strong>多线程</strong>“提供服务</li>
</ul>
<h3 id="过滤器两种开发方式"><a href="#过滤器两种开发方式" class="headerlink" title="过滤器两种开发方式"></a>过滤器两种开发方式</h3><h5 id="过滤器的配置形式"><a href="#过滤器的配置形式" class="headerlink" title="过滤器的配置形式"></a>过滤器的配置形式</h5><pre><code class="xml">&lt;filter&gt;
   &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;
   &lt;filter-class&gt;filter.MyFirstFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
   &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt; //对所有url进行拦截
&lt;/filter-mapping&gt;
</code></pre>
<h5 id="过滤器的注解形式"><a href="#过滤器的注解形式" class="headerlink" title="过滤器的注解形式"></a><span style = "color : red">过滤器的注解形式</span></h5><pre><code class="java">@WebFilter(filterName = &quot;MyAnnoationFilter&quot;, urlPatterns = &quot;/*&quot;)
public class MyAnnoationFilter implements Filter&#123;
    
&#125;
</code></pre>
<hr>
<pre><code class="java">MyAnnoationFilter.java      //自定义过滤器名称  设置去过滤哪些url
@@WebFilter(filterName = &quot;MyAnnoationFilter&quot;, urlPatterns = &quot;/*&quot;)
public class MyAnnoationFilter implements Filter&#123;
    public void destroy()&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
        System.out.println(&quot;过滤器已生效&quot;);
        chain.doFilter(req, resp);
    &#125;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
&#125;
</code></pre>
<h3 id="配置与注解如何选择"><a href="#配置与注解如何选择" class="headerlink" title="配置与注解如何选择"></a>配置与注解如何选择</h3><ul>
<li><span style = "color :blue"><strong>配置形式</strong>维护性更好，适合应用全局过滤 [<strong>中, 大型项目</strong>]</span></li>
<li><strong>注解形式</strong>开发体验更好，适合于小型项目敏捷开发</li>
</ul>
<h3 id="Web中文乱码的解决-需要强制转换"><a href="#Web中文乱码的解决-需要强制转换" class="headerlink" title="Web中文乱码的解决 [需要强制转换]"></a>Web中文乱码的解决 [需要强制转换]</h3><ul>
<li><strong>GET请求</strong>-server.xml增加<strong>URIEncoding &#x3D; “UTF-8”;</strong></li>
<li><strong>POST请求</strong>-使用<strong>request.setCharacterEncoding(“UTF-8”);</strong></li>
<li>响应-<strong>response.setContentType(“text&#x2F;html; charset &#x3D; UTF-8”);</strong></li>
</ul>
<pre><code class="java">CharacterEncodingFilter.java
public class CharacterEncodingFilter implements Filter&#123;
    public void destroy()&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
       //上面的不是Httpservlet要自己写HttpServlet并导入 解决post请求中的中文乱码
        HttpServletRequest req = (HttpServletRequest)request;//解决中文乱码问题
        req.serCharacterEncoding(&quot;UTF-8&quot;);
        HttpServletResponse res = (HttpServletResponse)response;//解决中文乱码问题
        res.serContentType(&quot;text/html;charset=UTF-8&quot;);
        chain.doFilter(req, response);
    &#125;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
&#125;
</code></pre>
<h6 id="ServletRequest-最顶级-和-HTTPServletRequest-需继承最顶级-关系所在"><a href="#ServletRequest-最顶级-和-HTTPServletRequest-需继承最顶级-关系所在" class="headerlink" title="ServletRequest[最顶级] 和 HTTPServletRequest[需继承最顶级]关系所在"></a>ServletRequest[最顶级] 和 HTTPServletRequest[需继承最顶级]关系所在</h6><p><img src="https://raw.githubusercontent.com/P-luminary/images/2407935960fe789c39d7ed5dcfd439551b455a97/data/ServletRequest%E6%8E%A5%E5%8F%A3.png"></p>
<pre><code class="xml">web.xml
&lt;filter&gt;
    &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.MyFirstFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt; //对所有url进行拦截
&lt;/filter-mapping&gt;
&lt;filter&gt;
    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.CharacterEncodingFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt; //对所有url进行拦截
&lt;/filter-mapping&gt;

====================================================================

&lt;!--或者在CharacterEncodingFilter上方进行注解 必须是全局唯一--&gt;
@WebFilter(filterName=&quot;CharacterEncodingFilter&quot;, urlPatterns=&quot;/*&quot;)
</code></pre>
<pre><code class="java">HelloServlet.java
@WebServlet(&quot;/hello&quot;)
public class HelloServlet extends HttpServlet&#123;
    public HelloServlet()&#123;&#125;
    protected void doGet(HttpServletReq req, HttpServletResp resp)&#123;
        resp.getWriter().println(&quot;你好！世界！！&quot;)
    &#125;
&#125;
</code></pre>
<h3 id="过滤器开发技巧"><a href="#过滤器开发技巧" class="headerlink" title="过滤器开发技巧"></a>过滤器开发技巧</h3><h5 id="过滤器参数化"><a href="#过滤器参数化" class="headerlink" title="过滤器参数化"></a>过滤器参数化</h5><ul>
<li>过滤器为了增强灵活性，允许配置信息放在web.xml</li>
<li>在web.xml中配置**&lt; init-param &gt;**设置过滤器参数</li>
</ul>
<h5 id="优化字符集过滤器-为了不去修改java代码"><a href="#优化字符集过滤器-为了不去修改java代码" class="headerlink" title="优化字符集过滤器 [为了不去修改java代码]"></a>优化字符集过滤器 [为了不去修改java代码]</h5><pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.CharacterEncodingFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;encoding&lt;/param-name&gt;
        &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;!--方便参数发生变化--&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;v1&lt;/param-name&gt;
        &lt;param-value&gt;GBK&lt;/param-value&gt;
    &lt;/init-param&gt;
    ......
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt; //对所有url进行拦截
&lt;/filter-mapping&gt;
-------------------------------------------------------------
&lt;!--或者在CharacterEncodingFilter上方进行注解 必须是全局唯一--&gt;
@WebFilter(filterName=&quot;CharacterEncodingFilter&quot;, urlPatterns=&quot;/*&quot;,initParams=&#123;
    @WebInitParam(name=&quot;encoding&quot;, value=&quot;UTF-8&quot;),
    @WebInitParam(name=&quot;p1&quot;, value=&quot;v1&quot;)
&#125;)
</code></pre>
<pre><code class="java">-------------------------注意init与doFilter----------------------------
public class CharacterEncodingFilter implements Filter&#123;
    private String encoding; //类中的全局私有变量
    public void init(FilterConfig filterConfig)thorws ServletException&#123;
        encoding=filterConfig.getInitParameter(&quot;encoding&quot;);
        System.out.println(encoding); //用debug打开
    &#125;
    public void doFilter(ServletRequest req, ServeltResponse resp, FilterChain chain)throws IOException,ServletException&#123;
       //上面的不是Httpservlet要自己写HttpServlet并导入 解决post请求中的中文乱码
        HttpServletRequest req = (HttpServletRequest)request;//解决中文乱码问题
        req.setCharacterEncoding(&quot;encoding&quot;);
        HttpServletResponse res = (HttpServletResponse)response;//解决中文乱码问题
        res.setContentType(&quot;text/html;charset=&quot; + encoding);// GBK/UTF-8或者其他
        chain.doFilter(req, response);
    &#125;
&#125;
</code></pre>
<h3 id="url-pattern设置过滤范围"><a href="#url-pattern设置过滤范围" class="headerlink" title="url-pattern设置过滤范围"></a>url-pattern设置过滤范围</h3><h5 id="url-pattern常用写法"><a href="#url-pattern常用写法" class="headerlink" title="url-pattern常用写法"></a>url-pattern常用写法</h5><ul>
<li>&#x2F;index.jsp - 执行资源精准匹配</li>
<li>&#x2F;servlet&#x2F;* - 以前缀进行模糊匹配</li>
<li>*.jsp - 以后缀进行模糊匹配</li>
</ul>
<pre><code class="java">SampleServlet1.java
@WebServlet(&quot;/servlet/sample1&quot;)
public class SampleServlet1 extends HttpServlet&#123;
   public SampleServlet1()&#123;&#125;
   protected void doGet(HttpServletRequest req,HttpServletResponse resp)&#123;
       resp.getWriter().println(&quot;I&#39;m&quot; + this.getClass().getSimpleName());
   &#125;
&#125;
</code></pre>
<pre><code class="java">UrlPatternFilter.java
public class UrlPatternFilter implements Filter&#123;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
//上面的不是Httpservlet要自己写HttpServlet并导入 解决post请求中的中文乱码
    HttpServletRequest req = (HttpServletRequest)request;//解决中文乱码问题
    HttpServletResponse res = (HttpServletResponse)response;//解决中文乱码问题
&#125;
</code></pre>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;UrlPatternFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.UrlPatternFilter&lt;/filter-class&gt;
&lt;/filter&gt;
    &lt;filter-mapping&gt; &lt;!--  &lt;url-pattern&gt;/test.jsp&lt;/url-pattern&gt; &lt;!--只对其进行过滤 --&gt;
        &lt;param-name&gt;UrlPatternFilter&lt;/param-name&gt;
        &lt;url-pattern&gt;/servlet/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    ......
</code></pre>
<blockquote>
<p>在控制台Console显示：拦截到<a target="_blank" rel="noopener" href="http://localhost:8080/url-pattern/test.jsp">http://localhost:8080/url-pattern/test.jsp</a>  因为这是精准匹配 需要换成 <strong>&#x2F;</strong>*</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/P-luminary/images/3921d7a4ad3d1c7e96c980109c605e1e7568de73/data/%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%9E%E4%BE%8B.png"></p>
<h3 id="x2F-映射的问题"><a href="#x2F-映射的问题" class="headerlink" title="&#x2F; 映射的问题"></a>&#x2F; 映射的问题</h3><ul>
<li><strong>&#x2F;</strong> 指映射Web应用根路径, 且只会对Servlet生效</li>
<li>默认首页index.jsp会让 <strong>&#x2F;</strong> 失效</li>
<li><strong>&#x2F;</strong> 与 <strong>&#x2F;</strong>* 含义不同, 前者指向根路径, 后者代表所有</li>
</ul>
<pre><code class="java">SampleServlet2.java
@WebServlet(&quot;/&quot;)
public class SampleServlet2 extends HttpServlet&#123;
    public SampleServlet1()&#123;&#125;
    protected void doGet(HttpServletRequest req,HttpServletResponse resp)&#123;
        resp.getWriter().println(&quot;I&#39;m&quot; + this.getClass().getSimpleName());
    &#125;
&#125;
</code></pre>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;UrlPatternFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.UrlPatternFilter&lt;/filter-class&gt;
&lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;UrlPatternFilter&lt;/param-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;UrlPatternFilter&lt;/param-name&gt;
        &lt;url-pattern&gt;/servlet/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;UrlPatternFilter&lt;/param-name&gt;
        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    ......
-------------------------------------------------------------
&lt;!--或者在UrlPatternFilter上方进行注解 必须是全局唯一--&gt;
@WebFilter(filterName=&quot;UrlPatternFilter&quot;, urlPatterns=&#123;
    &quot;/&quot;,&quot;/servlet/*&quot;,&quot;*.jsp&quot;
&#125;)
</code></pre>
<p>这个url-pattern 中的**&#x2F;** 只会映射到根路径的SampleServlet2</p>
<blockquote>
<p>@WebServlet(“&#x2F;“)<br>public class SampleServlet2 extends HttpServlet{</p>
</blockquote>
<p>Web.xml中默认配置了首页为<strong>index.jsp</strong> 如果想对默认首页拦截需要写<br>&lt; url-pattern&gt; ***&#x2F;** &lt; &#x2F;url-pattern&gt; 或 &lt; url-pattern&gt; <strong>&#x2F;index.jsp</strong> &lt; &#x2F;url-pattern&gt;<br>默认首页优先级比servlet要高</p>
<h3 id="过滤链"><a href="#过滤链" class="headerlink" title="过滤链"></a>过滤链</h3><h5 id="过滤链开发注意事项"><a href="#过滤链开发注意事项" class="headerlink" title="过滤链开发注意事项"></a>过滤链开发注意事项</h5><ul>
<li>每一个过滤器应具有单独职能</li>
<li>过滤器的执行顺序以**&lt; filter-mapping &gt;**的前后顺序为准</li>
<li>调用**chain.doFilter()**将请求向后传递</li>
</ul>
<pre><code class="java">FilterA.java
public class FilterA implements Filter&#123;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
       System.out.println(&quot;I&#39;m Filter A&quot;);
       chain.doFilter(req, resp);
    &#125;
    public void destroy()&#123;&#125;

FilterB.java
public class FilterA implements Filter&#123;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
       System.out.println(&quot;I&#39;m Filter B&quot;);
       chain.doFilter(req, resp);
    &#125;
    public void destroy()&#123;&#125;

FilterC.java
public class FilterA implements Filter&#123;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
       System.out.println(&quot;I&#39;m Filter C&quot;);
       chain.doFilter(req, resp);
    &#125;
    public void destroy()&#123;&#125;
</code></pre>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;FilterA&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.FilterA&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter&gt;
    &lt;filter-name&gt;FilterB&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.FilterA&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter&gt;
    &lt;filter-name&gt;FilterC&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.FilterA&lt;/filter-class&gt;
&lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;FilterA&lt;/param-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;FilterB&lt;/param-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;FilterC&lt;/param-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
---------------------不推荐使用注解--------------------------
用注解方式需要在每个Filter.java上面添加注解 
@WebFilter(filterName=&quot;FilterA&quot;, urlPatterns=&quot;/*&quot;)
public class FilterA implements Filter&#123;
    //按照字母表升序排序 且不区分大小写
&#125;
</code></pre>
<pre><code class="java">HelloServlet.java
@WebServlet(&quot;/hello&quot;)
public class HelloServlet extends HttpServlet&#123;
    public HelloServlet()&#123;&#125;
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException&#123;
        response.getWriter().print(&quot;Hello World!&quot;);
        Sysotem.out.println(&quot;Hello World!&quot;)
    &#125;
&#125;
</code></pre>
<blockquote>
<p>Console显示：顺序由<filter-mapping>决定<br>I’m Filter A      &#x2F;&#x2F;chain.doFilter(req, resp); 请求顺着过滤链往下走<br>I’m Filter B<br>I’m Filter C      &#x2F;&#x2F;过滤链没有格外的过滤器了 回到HelloServlet.java最终处理<br>Hello World!<br>&#x2F;&#x2F;servlet处理完以后按照原先的顺序 逆向由Hello、C、B、A顺序返回</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/P-luminary/images/feed3d659f7f61c2ae891d07fb5a43a42672e13b/data/%E8%BF%87%E6%BB%A4%E9%93%BE%E5%8E%9F%E7%90%86%E5%9B%BE.png"></p>
<blockquote>
<p>刻意去控制过滤器访问 VPN 仅限中国访问 如果是中国地址就调用<strong>chain.doFilter</strong>进行放行 其本质是防火墙</p>
</blockquote>
<h3 id="多端设备自动匹配-Pc端-移动端"><a href="#多端设备自动匹配-Pc端-移动端" class="headerlink" title="多端设备自动匹配(Pc端 移动端)"></a>多端设备自动匹配(Pc端 移动端)</h3><h5 id="设备适配过滤器"><a href="#设备适配过滤器" class="headerlink" title="设备适配过滤器"></a>设备适配过滤器</h5><pre><code class="html">index.html
自动脑补绘制两个html首页
一个是电脑端的图片展示
一个是手机端的图片展示
</code></pre>
<pre><code class="java">DeviceAdapterFilter.java
public class DeviceAdapterFilter implements Filter&#123;
    public void init(FilterConfig filterConfig)thorws ServletException&#123;&#125;
    public void doFilter(ServletRequest req, ServeltResponse resp)throws IOException,ServletException,FilterChain chain&#123;
       HttpServletRequest req = (HttpServletRequest)request;//强制类型转换
          HttpServletResponse res = (HttpServletResponse)response;
       /*
       /index.html
        PC: /desktop/index.html
        MOBILE: /mobile/index.html

       /test.html
        PC: /desktop/test.html
        MOBILE: /mobile/test.html
       */
       String uri = req.getRequestURI();
       System.out.println(&quot;URI: &quot; + uri);
       if(uri.startsWith(&quot;/desktop&quot;) || uri.startsWith(&quot;/mobile&quot;))&#123;
           chain.doFilter(req, resp);
       &#125;else &#123;    //读取客户端请求头 所有字符串转成小写
           String userAgent = req.getHeader(&quot;user-agent&quot;).toLowerCase(); 
           String targetURL = &quot;&quot;;
           if(userAgent.indexOf(&quot;android&quot;)!=-1 || userAgent.indexOf(&quot;iphone&quot;)!=-1)&#123;
               targetURI = &quot;/mobile&quot; + uri;
               System.out.println(&quot;移动端设备正在访问, 重新跳转URI: &quot; + targetURI)
               res.sendRedircet(targetURI); //向/mobile对应页面进行获取
           &#125;else &#123;
               targetURI = &quot;/desktop&quot; + uri;
                System.out.println(&quot;PC端设备正在访问, 重新跳转URI: &quot; + targetURI)
               res.sendRedircet(targetURI); //向/mobile对应页面进行获取
           &#125;
       &#125;
    &#125;
    public void destroy()&#123;&#125;
&#125;
</code></pre>
<pre><code class="xml">&lt;filter&gt;
    &lt;filter-name&gt;DeviceAdapterFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;filter.DeviceAdapterFilter&lt;/filter-class&gt;
&lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;param-name&gt;DeviceAdapterFilter&lt;/param-name&gt;
        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt; &lt;!--对其进行过滤--&gt;
    &lt;/filter-mapping&gt;
</code></pre>
<blockquote>
<p>URI: &#x2F;index.html<br>PC端设备正在访问, 重新跳转URI: &#x2F;desktop&#x2F;index.html<br>URI: &#x2F;desktop&#x2F;index.html</p>
<p>++++++++++++++++++++++++++++++++++++++++++++</p>
<p>URI: &#x2F;index.html<br>移动端设备正在访问, 重新跳转URI: &#x2F;mobile&#x2F;index.html<br>URI: &#x2F;mobile&#x2F;index.html</p>
</blockquote>
<h1 id="监听器、Freemarker"><a href="#监听器、Freemarker" class="headerlink" title="监听器、Freemarker"></a>监听器、Freemarker</h1><h6 id="监听器：对Web应用对象的行为进行监控-触发事件后进行捕获-★★★"><a href="#监听器：对Web应用对象的行为进行监控-触发事件后进行捕获-★★★" class="headerlink" title="监听器：对Web应用对象的行为进行监控 [触发事件后进行捕获] ★★★"></a>监听器：对Web应用对象的行为进行监控 [触发事件后进行捕获] ★★★</h6><h6 id="Freemarker-模板引擎-：模板脚本-数据来实现最终数据的产生-★★★★★"><a href="#Freemarker-模板引擎-：模板脚本-数据来实现最终数据的产生-★★★★★" class="headerlink" title="Freemarker[模板引擎]：模板脚本+数据来实现最终数据的产生 ★★★★★"></a>Freemarker[模板引擎]：模板脚本+数据来实现最终数据的产生 ★★★★★</h6><h3 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h3><p><strong>生活中的”监听器”<strong>：汽车自动刹车系统 自动检测前方障碍物触发自动刹车；实时监控</strong>电表</strong>水表 钱不足直接断电</p>
<h6 id="监听器-Listener"><a href="#监听器-Listener" class="headerlink" title="监听器 - Listener"></a>监听器 - Listener</h6><ul>
<li>监听器(Listener)是J2EE Servlet模块下的组件</li>
<li>Listener的作用对Web应用对象的行为进行监控</li>
<li>通过Listener监听自动触发指定的功能代码</li>
</ul>
<h3 id="三种监听对象"><a href="#三种监听对象" class="headerlink" title="三种监听对象"></a>三种监听对象</h3><ul>
<li><strong>ServletContext</strong> - 对全局ServletContext及其属性进行监听</li>
<li><strong>HttpSession</strong> - 对用户会话及其属性操作进行监听</li>
<li><strong>ServletRequest</strong> - 对请求及属性操作进行监听</li>
</ul>
<h6 id="过滤器与监听器的区别"><a href="#过滤器与监听器的区别" class="headerlink" title="过滤器与监听器的区别"></a>过滤器与监听器的区别</h6><ul>
<li><strong>过滤器</strong>(Filter)的职责是对**<u>URL进行过滤拦截</u>**, 是主动的执行</li>
<li><strong>监听器</strong>(Listener)的职责是对**<u>Web对象进行监听</u>**, 是被动触发</li>
</ul>
<h3 id="开发监听器三要素"><a href="#开发监听器三要素" class="headerlink" title="开发监听器三要素"></a>开发监听器三要素</h3><ul>
<li>实现XxxListener接口, 不同接口对应不同监听对象</li>
<li>实现每个接口中独有的方法, 实现触发监听的后续操作</li>
<li>在web.xml中配置**&lt; listener &gt;**使监听器生效</li>
</ul>
<p>&#96;&#96;</p>
<h3 id="第一个监听器-全局推荐使用配置形式"><a href="#第一个监听器-全局推荐使用配置形式" class="headerlink" title="第一个监听器 [全局推荐使用配置形式]"></a>第一个监听器 [全局推荐使用<u>配置形式</u>]</h3><pre><code class="java">FirstListener.java //Debug启动
@WebListener //启动时tomcat会自动扫描
public class FirstListener implements ServletContextListener&#123;
    //项目初始化所触发
    public void contextInitialized(ServletContextEvent sce)&#123;
        System.out.println(&quot;ServletContext已初始化&quot;);
    &#125;
    //上下文被销毁时所触发 关闭时自动销毁
    public void contextDestoryed(ServletContextEvent sce)&#123;
       System.out.println(&quot;ServletContext已销毁&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="xml">&lt;listener&gt;
    &lt;listener-class&gt;com.imooc.listener.FirstListener&lt;/listener-class&gt;
&lt;/listener&gt;
</code></pre>
<h3 id="内置对象监听接口"><a href="#内置对象监听接口" class="headerlink" title="内置对象监听接口"></a>内置对象监听接口</h3><ul>
<li><strong>ServletContextListener</strong> - 监听ServletContext对象创建、销毁等操作</li>
<li><strong>HttpSessionListener</strong> - 监听HttpSession对象创建、销毁等操作</li>
<li><strong>ServletRequestListener</strong> - 监听HttpServletRequest对象创建、销毁等操作</li>
</ul>
<pre><code class="xml">&lt;listener&gt;
    &lt;listener-class&gt;com.example.json.WebListener&lt;/listener-class&gt;
&lt;/listener&gt;
</code></pre>
<pre><code class="java">HelloServlet.java //设置属性的时候会触发WebListener
WebServlet(&quot;/hello&quot;)
public class HelloServlet extends HttpServlet&#123;
    public HelloServlet()&#123;&#125;
    protected void doGet(HttpServletRequest req,HttpServletResponse resp)&#123;
        resp.getWriter().println(&quot;Hello World&quot;);
        req.getServletContext().setAttribute(&quot;sc-attr1&quot;,&quot;sc-attr-value1&quot;);
        req.getSession().setAttribute(&quot;session-attr1&quot;,&quot;session-attr-value1&quot;);
        req.setAttribute(&quot;request-attr1&quot;,&quot;request-attr-value1&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">WebListener.java
package com.example.json;

import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class WebListener implements ServletContextListener, HttpSessionListener, ServletRequestListener &#123;
    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) &#123;
        System.out.println(&quot;ServletContext已初始化&quot;);
    &#125;

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) &#123;
        System.out.println(&quot;ServletContext已被销毁&quot;);
    &#125;

    @Override
    public void sessionCreated(HttpSessionEvent httpSessionEvent) &#123;
        HttpSession session = httpSessionEvent.getSession();
        System.out.println(&quot;Session已被创建, SessionId:&quot; + session);
    &#125;

    @Override
    public void sessionDestroyed(HttpSessionEvent httpSessionEvent) &#123;
        System.out.println(&quot;Session已被销毁&quot;);
    &#125;

    @Override
    public void requestDestroyed(ServletRequestEvent servletRequestEvent) &#123;
        System.out.println(&quot;HttpServletRequest已被销毁&quot;);
    &#125;

    @Override
    public void requestInitialized(ServletRequestEvent servletRequestEvent) &#123;
        HttpServletRequest request = (HttpServletRequest)servletRequestEvent.getServletRequest();
        //请求初始化完毕
        System.out.println(&quot;HttpServletRequest已被创建, URI&quot; + request.getRequestURI());
    &#125;
&#125;

//session被创建了以后 第二次从同样的浏览器发出的请求覆盖了sessionid(3min后过期可人为而改变) 隐藏且可用
HttpServletRequest已被创建, URI/json_war_exploded/
Session已被创建, SessionId:org.apache.catalina.session.StandardSessionFacade@71ed02bc
HttpServletRequest已被销毁
HttpServletRequest已被创建, URI/json_war_exploded/
Session已被创建, SessionId:org.apache.catalina.session.StandardSessionFacade@194a08e0
HttpServletRequest已被销毁
</code></pre>
<h3 id="属性监听接口-了解"><a href="#属性监听接口-了解" class="headerlink" title="属性监听接口 [了解]"></a>属性监听接口 [了解]</h3><ul>
<li><strong>ServletContextAttributeListener</strong> - 监听全局属性操作</li>
<li><strong>HttpSessionAttributeListener</strong> - 监听用户会话属性操作</li>
<li><strong>ServletRequestAttributeListener</strong> - 监听请求属性操作</li>
</ul>
<pre><code class="java">web.xml 和 helloServlet.java的代码都一样
</code></pre>
<pre><code class="java">WebAttributeListener.java
package com.example.json;

import javax.servlet.ServletContextAttributeEvent;
import javax.servlet.ServletContextAttributeListener;
import javax.servlet.ServletRequestAttributeEvent;
import javax.servlet.ServletRequestAttributeListener;
import javax.servlet.http.HttpSessionAttributeListener;
import javax.servlet.http.HttpSessionBindingEvent;

public class WebAttributeListener implements ServletContextAttributeListener, HttpSessionAttributeListener, ServletRequestAttributeListener &#123;
    @Override
    public void attributeAdded(ServletContextAttributeEvent servletContextAttributeEvent) &#123;
        System.out.println(&quot;ServletContext新增属性：&quot; + servletContextAttributeEvent.getName() + &quot;-&gt;&quot; + servletContextAttributeEvent.getValue());
    &#125;

    @Override
    public void attributeRemoved(ServletContextAttributeEvent servletContextAttributeEvent) &#123;

    &#125;

    @Override
    public void attributeReplaced(ServletContextAttributeEvent servletContextAttributeEvent) &#123;

    &#125;

    @Override
    public void attributeAdded(ServletRequestAttributeEvent servletRequestAttributeEvent) &#123;
        System.out.println(&quot;ServletRequestAttributeEvent新增属性：&quot; + servletRequestAttributeEvent.getName() + &quot;-&gt;&quot; + servletRequestAttributeEvent.getValue());

    &#125;

    @Override
    public void attributeRemoved(ServletRequestAttributeEvent servletRequestAttributeEvent) &#123;

    &#125;

    @Override
    public void attributeReplaced(ServletRequestAttributeEvent servletRequestAttributeEvent) &#123;

    &#125;

    @Override
    public void attributeAdded(HttpSessionBindingEvent httpSessionBindingEvent) &#123;
        System.out.println(&quot;HttpSessionBindingEvent新增属性：&quot; + httpSessionBindingEvent.getName() + &quot;-&gt;&quot; + httpSessionBindingEvent.getValue());
    &#125;

    @Override
    public void attributeRemoved(HttpSessionBindingEvent httpSessionBindingEvent) &#123;

    &#125;

    @Override
    public void attributeReplaced(HttpSessionBindingEvent httpSessionBindingEvent) &#123;

    &#125;
&#125;

ServletContext已初始化
[2023-09-28 04:44:52,590] Artifact json:war exploded: Artifact is deployed successfully
[2023-09-28 04:44:52,590] Artifact json:war exploded: Deploy took 394 milliseconds
HttpServletRequest已被创建, URI/json_war_exploded/
ServletContext新增属性：org.apache.jasper.runtime.JspApplicationContextImpl-&gt;org.apache.jasper.runtime.JspApplicationContextImpl@7753fcd4
ServletContext新增属性：org.apache.jasper.compiler.ELInterpreter-&gt;org.apache.jasper.compiler.ELInterpreterFactory$DefaultELInterpreter@3b424c58
ServletContext新增属性：org.apache.jasper.compiler.StringInterpreter-&gt;org.apache.jasper.compiler.StringInterpreterFactory$DefaultStringInterpreter@15bdbfaf
Session已被创建, SessionId:org.apache.catalina.session.StandardSessionFacade@6baa8579
HttpServletRequest已被销毁
HttpServletRequest已被创建, URI/json_war_exploded/
Session已被创建, SessionId:org.apache.catalina.session.StandardSessionFacade@2843a202
HttpServletRequest已被销毁
HttpServletRequest已被创建, URI/json_war_exploded/hello
ServletContext新增属性：sc-attr1-&gt;sc-attr-value1
HttpSessionBindingEvent新增属性：session-attr1-&gt;session-attr-value1
ServletRequestAttributeEvent新增属性：request-attr1-&gt;request-attr-value1
HttpServletRequest已被销毁
</code></pre>
<h3 id="监听器的应用场景"><a href="#监听器的应用场景" class="headerlink" title="监听器的应用场景"></a>监听器的应用场景</h3><p><strong>请求流量分析 [以图表形式展现]</strong></p>
<blockquote>
<p>流程：在应用启动的时候将两个List初始化 一个保存时间一个保存数值 分情况 若时间不存在初始化1 若存在则在原始＋1进行更新操作</p>
</blockquote>
<pre><code class="xml">web.xml
&lt;listener&gt;
  &lt;listener-class&gt;com.example.json.RequestTotalListener&lt;/listener-class&gt;
&lt;/listener&gt;
</code></pre>
<pre><code class="java">RequestTotalListener.java
package com.example.json;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.ServletRequestEvent;
import javax.servlet.ServletRequestListener;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class RequestTotalListener implements ServletContextListener, ServletRequestListener &#123;
    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) &#123;
        List timeList = new ArrayList(); //时间数据
        List valueList = new ArrayList(); //具体时间访问量数据
        servletContextEvent.getServletContext().setAttribute(&quot;timeList&quot;, timeList);//得到最原始的context
        servletContextEvent.getServletContext().setAttribute(&quot;valueList&quot;, valueList);//启动ServletContext时自动启动倆请求
    &#125;

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) &#123;

    &#125;

    @Override
    public void requestDestroyed(ServletRequestEvent servletRequestEvent) &#123;

    &#125;

    @Override
    public void requestInitialized(ServletRequestEvent servletRequestEvent) &#123;
        //请求初始化 每来一个新的请求监听器都会执行此方法 记录某一时间点的访问量
        //TimeList：10:02  10:03  10:04  10:05
        //ValueList: 5       7     10    1+1=2
        List&lt;String&gt; timeList = (List)servletRequestEvent.getServletContext().getAttribute(&quot;timeList&quot;);
        List&lt;Integer&gt; valueList = (List)servletRequestEvent.getServletContext().getAttribute(&quot;valueList&quot;);
        Date date = new Date();
        SimpleDateFormat sdf = new SimpleDateFormat(&quot;HH:mm&quot;); //按照小时分钟来取
        String time = sdf.format(date); //date对象传入
        if (timeList.indexOf(time) == -1) &#123; //查找对应的数据在集合中是否存在
            //若时间不存在 则追加时间
            timeList.add(time);
            valueList.add(1);//当前有1个请求被创建
            servletRequestEvent.getServletContext().setAttribute(&quot;timeList&quot;, timeList);
            servletRequestEvent.getServletContext().setAttribute(&quot;valueList&quot;, valueList);
        &#125;else &#123; //假设时间存在 不增加新数据 在原有数据加1
            int index = timeList.indexOf(time); //10:05返回索引值3
            int value = valueList.get(index);
            valueList.set(index, value+1);
            servletRequestEvent.getServletContext().setAttribute(&quot;valueList&quot;, valueList);
        &#125;
    &#125;
&#125;
</code></pre>
<pre><code class="java">RequestTotalServlet.java
package com.imooc.total;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.alibaba.fastjson.JSON;

/**
 * Servlet implementation class RequestTotalServlet
 */
@WebServlet(&quot;/rt&quot;)
public class RequestTotalServlet extends HttpServlet &#123;
    private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public RequestTotalServlet() &#123;
        super();
        // TODO Auto-generated constructor stub
    &#125;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
        ServletContext context = request.getServletContext();//得到全局context对象
        List&lt;String&gt; timeList = (List)context.getAttribute(&quot;timeList&quot;);//提取之前创建的
        List&lt;Integer&gt; valueList = (List)context.getAttribute(&quot;valueList&quot;);
        response.setContentType(&quot;text/html;charset=utf-8&quot;);
        /*response.getWriter().println(timeList.toString()); //打印输出时间数值数据
        response.getWriter().println(&quot;&lt;br/&gt;&quot;);
        response.getWriter().println(valueList.toString());*/
        
        Map result = new HashMap();
        result.put(&quot;timeList&quot;, timeList);
        result.put(&quot;valueList&quot;, valueList);
        String json = JSON.toJSONString(result);
        response.getWriter().println(json);
    &#125;

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
        // TODO Auto-generated method stub
        doGet(request, response);
    &#125;
&#125;
</code></pre>
<pre><code class="html">text3.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;Test Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;I&#39;m test page 3&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<hr>
<pre><code class="html">&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.1.1.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;div id=&quot;main&quot; style=&quot;width: 600px; height: 400px;&quot;&gt;&lt;/div&gt;
   &lt;script type = &quot;text/javascript&quot;&gt;
     //基于准备好的dom, 初始化echarts实例
    var myChart = echarts.init(document.getElementById(&#39;main&#39;));
     //指定图表的配置项和数据
    var option = &#123;
        title:&#123;
            text:&#39;Echarts 入门示例&#39;
        &#125;,
        tooltip: &#123;&#125;,
        legend: &#123;
            data: [&#39;销量&#39;]
        &#125;,
        xAxis: &#123;
            data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]
        &#125;,
        yAxis: &#123;&#125;,
        series:[&#123;
            name: &#39;销量&#39;,
            type: &#39;bar&#39;,
            data: [5,20,36,10,10,20]
        &#125;]
    &#125;;
       //使用刚指定的配置项和数据显示图表
       myChart.setOption(option);
    &lt;/script&gt;
&lt;/body&gt;
</code></pre>
<h3 id="入门百度Echarts组件"><a href="#入门百度Echarts组件" class="headerlink" title="入门百度Echarts组件"></a>入门百度Echarts组件</h3><h6 id="利用Ajax和Jquery进行前后端通信"><a href="#利用Ajax和Jquery进行前后端通信" class="headerlink" title="利用Ajax和Jquery进行前后端通信"></a>利用Ajax和Jquery进行前后端通信</h6><p><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/index.html">Apache ECharts</a></p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Insert title here&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-3.1.1.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;main&quot; style=&quot;width: 600px; height: 400px;&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    //每一秒钟向服务器查询一次数据把变化数据重新写入图表
//需要Javascript定时器完成
    function showChat()&#123;//显示图表
        //基础的通讯部分
    $.ajax(&#123;
        url:&quot;./rt&quot;,
        type:&quot;get&quot;,
        dataType:&quot;json&quot;,
        success:function(json)&#123;
            console.log(json.timeList);
            console.log(json.valueList);
    //基于准备好的dom, 初始化echarts实例
    var myChart = echarts.init(document.getElementById(&#39;main&#39;));
    //指定图表的配置项和数据
    var option = &#123;
        title: &#123;
            text: &#39;请求流量分析统计&#39;
        &#125;,
        tooltip: &#123;&#125;,
        legend: &#123;
            data: [&#39;访问量&#39;]
        &#125;,
        xAxis: &#123;
           // data: [&quot;衬衫&quot;, &quot;羊毛衫&quot;, &quot;雪纺衫&quot;, &quot;裤子&quot;, &quot;高跟鞋&quot;, &quot;袜子&quot;]
            data: json.timeList
        &#125;,
        yAxis: &#123;&#125;,
        series: [&#123;
            name: &#39;访问量&#39;,
            type: &#39;line&#39;, //柱状图  line是折线图
           // data: [5, 20, 36, 10, 10, 20] //图中展示的数值 与商法data对应
            data: json.valueList
        &#125;]
    &#125;;
    //激活使用刚指定的配置项和数据显示图表
    myChart.setOption(option);
        &#125;
    &#125;)
&#125;
       window.setInterval(&quot;shwoChart()&quot;, 1000);//间隔某时长去执行指定代码
    //每秒钟通过shwoChart()向服务器&quot;./rt&quot;发送请求 对此请求进行排除用RequestTotalListener去改写
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="java">RequestTotalListener.java
package com.example.json;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.ServletRequestEvent;
import javax.servlet.ServletRequestListener;
import javax.servlet.http.HttpServletRequest;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class RequestTotalListener implements ServletContextListener, ServletRequestListener &#123;
    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) &#123;
        List timeList = new ArrayList(); //时间数据
        List valueList = new ArrayList(); //具体时间访问量数据
        servletContextEvent.getServletContext().setAttribute(&quot;timeList&quot;, timeList);//得到最原始的context
        servletContextEvent.getServletContext().setAttribute(&quot;valueList&quot;, valueList);//启动ServletContext时自动启动倆请求
    &#125;

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) &#123;

    &#125;

    @Override
    public void requestDestroyed(ServletRequestEvent servletRequestEvent) &#123;

    &#125;

    @Override
    public void requestInitialized(ServletRequestEvent servletRequestEvent) &#123;
        HttpServletRequest request = (HttpServletRequest)servletRequestEvent.getServletRequest();
        String url = request.getRequestURL().toString();
        if (url.endsWith(&quot;/rt&quot;) == true)&#123;
            return; //将rt的url排除之外
        &#125;
        //请求初始化 每来一个新的请求监听器都会执行此方法 记录某一时间点的访问量
        //TimeList：10:02  10:03  10:04  10:05
        //ValueList: 5       7     10    1+1=2
        List&lt;String&gt; timeList = (List)servletRequestEvent.getServletContext().getAttribute(&quot;timeList&quot;);
        List&lt;Integer&gt; valueList = (List)servletRequestEvent.getServletContext().getAttribute(&quot;valueList&quot;);
        Date date = new Date();
        SimpleDateFormat sdf = new SimpleDateFormat(&quot;HH:mm&quot;); //按照小时分钟来取
        String time = sdf.format(date); //date对象传入
        if (timeList.indexOf(time) == -1) &#123; //查找对应的数据在集合中是否存在
            //若时间不存在 则追加时间
            timeList.add(time);
            valueList.add(1);//当前有1个请求被创建
            servletRequestEvent.getServletContext().setAttribute(&quot;timeList&quot;, timeList);
            servletRequestEvent.getServletContext().setAttribute(&quot;valueList&quot;, valueList);
        &#125;else &#123; //假设时间存在 不增加新数据 在原有数据加1
            int index = timeList.indexOf(time); //10:05返回索引值3
            int value = valueList.get(index);
            valueList.set(index, value+1);
            servletRequestEvent.getServletContext().setAttribute(&quot;valueList&quot;, valueList);
        &#125;
    &#125;
&#125;
</code></pre>
<pre><code class="java">RequestTotalServlet.java
package com.example.json;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.alibaba.fastjson.JSON;

/**
 * Servlet implementation class RequestTotalServlet
 */
@WebServlet(&quot;/rt&quot;)
public class RequestTotalServlet extends HttpServlet &#123;
    private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public RequestTotalServlet() &#123;
        super();
        // TODO Auto-generated constructor stub
    &#125;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
        ServletContext context = request.getServletContext();
        List&lt;String&gt; timeList = (List)context.getAttribute(&quot;timeList&quot;);
        List&lt;Integer&gt; valueList = (List)context.getAttribute(&quot;valueList&quot;);
        response.setContentType(&quot;text/html;charset=utf-8&quot;);
        /*response.getWriter().println(timeList.toString());
        response.getWriter().println(&quot;&lt;br/&gt;&quot;);
        response.getWriter().println(valueList.toString());*/ //将对象进行封装
        
        Map result = new HashMap();
        result.put(&quot;timeList&quot;, timeList);
        result.put(&quot;valueList&quot;, valueList);
        String json = JSON.toJSONString(result); //将java对象转换为json字符串
        response.getWriter().println(json);
    &#125;

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
        // TODO Auto-generated method stub
        doGet(request, response);
    &#125;
&#125;
</code></pre>
<h3 id="静态数据预加载"><a href="#静态数据预加载" class="headerlink" title="静态数据预加载"></a>静态数据预加载</h3><p>通过监听器在上下文初始化的时候放在系统的全局属性中</p>
<pre><code class="java">Channel.java
public class Channel&#123;
    private String channelName;
    private String url;
    ......
&#125;
</code></pre>
<pre><code class="java">StaticDataListener.java
package com.imooc.listener;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import com.imooc.listener.entity.Channel;

public class StaticDataListener implements ServletContextListener&#123;

    @Override
    public void contextInitialized(ServletContextEvent sce) &#123;
        // TODO Auto-generated method stub
        List list  = new ArrayList();
        list.add(new Channel(&quot;免费课程&quot; , &quot;http://www.imooc.com/1&quot;));
        list.add(new Channel(&quot;实战课程&quot; , &quot;http://www.imooc.com/2&quot;));
        list.add(new Channel(&quot;就业班&quot; , &quot;http://www.imooc.com/3&quot;));
        sce.getServletContext().setAttribute(&quot;channelList&quot;, list);
        //一次性写入到全局属性种
    &#125;

    @Override
    public void contextDestroyed(ServletContextEvent sce) &#123;
        // TODO Auto-generated method stub
        
    &#125;

&#125;
</code></pre>
<pre><code class="xml">web.xml
&lt;listener&gt;
    &lt;listener-class&gt;listener.StaticDataListener&lt;/listener-class&gt;
&lt;/listener&gt;
</code></pre>
<pre><code class="jsp">index.jsp
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
    pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;c:forEach items=&quot;$&#123;applicationScope.channelList &#125;&quot; var=&quot;c&quot;&gt; &lt;!--有效数据提取--&gt;
    &lt;a href=&quot;$&#123;c.url &#125;&quot;&gt;$&#123;c.channelName &#125;&lt;/a&gt; | 
&lt;/c:forEach&gt;
&lt;hr/&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="FreeMarker-FTL-模板引擎-可以替代jsp"><a href="#FreeMarker-FTL-模板引擎-可以替代jsp" class="headerlink" title="FreeMarker(FTL)模板引擎[可以替代jsp]"></a>FreeMarker(FTL)模板引擎[可以替代jsp]</h3><p>FreeMarker是一款用java语言编写的模版引擎，它虽然不是web应用框架，但它很合适作为web应用框架的一个组件。</p>
<p>特点：<br>1.轻量级模版引擎，不需要Servlet环境就可以很轻松的嵌入到应用程序中<br>2.能生成各种文本，如<strong>html，xml，java</strong>等<br>3.入门简单，它是用java编写的，很多语法和java相似</p>
<h6 id="基础语法及入门基础"><a href="#基础语法及入门基础" class="headerlink" title="基础语法及入门基础"></a>基础语法及入门基础</h6><p><strong>freemarker</strong>模板文件(*.ftl)的基本组成部分<br>1.文本：直接输出的内容部分<br>2.注释：不会输出的内容，格式为  <strong>&lt;#– 注释内容 –&gt;</strong><br>3.取值(插值)：代替输出数据模型的部分，格式为${数据模型}或#{数据模型}<br>4.ftl指令：Freemarker指令，类似于HTML标记。</p>
<h6 id="字符输出"><a href="#字符输出" class="headerlink" title="字符输出"></a>字符输出</h6><pre><code class="jsp">$(emp.name?if_exists)  //变量存在,输出该变量,否则不输出
$&#123;emp.name!&#125;　　　　　　 //变量存在，输出该变量，否则不输出
$&#123;emp.name?default(&quot;xxx&quot;)&#125; // 变量不存在，取默认值xxx
$&#123;emp.name!&quot;xxx&quot;&#125;           // 变量不存在，取默认值xxx
</code></pre>
<h6 id="常用内部函数"><a href="#常用内部函数" class="headerlink" title="常用内部函数"></a>常用内部函数</h6><pre><code class="jsp">$&#123;&quot;123&lt;br&gt;456&quot;?html&#125; 　 // 对字符串进行HTML编码，对html中特殊字符进行转义
$&#123;&quot;str&quot;?cap_first&#125; 　　 // 使字符串第一个字母大写 
$&#123;&quot;Str&quot;?lower_case&#125;    // 将字符串转换成小写
$&#123;&quot;Str&quot;?upper_case&#125;   // 将字符串转换成大写
$&#123;&quot;str&quot;?trim&#125;            // 去掉字符串前后的空白字符
</code></pre>
<h6 id="字符串的两种拼接方法"><a href="#字符串的两种拼接方法" class="headerlink" title="字符串的两种拼接方法"></a>字符串的两种拼接方法</h6><pre><code class="jsp">$&#123;&quot;hello$&#123;emp.name!&#125;&quot;&#125; //输出hello+变量名
$&#123;&quot;hello&quot;+emp.name!&#125;   //使用+号来连接,输出hello+变量名
</code></pre>
<h6 id="截取子串"><a href="#截取子串" class="headerlink" title="截取子串"></a>截取子串</h6><pre><code class="jsp">可以通过如下语法来截取子串:
&lt;#assign str = &quot;abcdefghijklmn&quot;/&gt;
// 方法1$&#123;str?substring(0,4)&#125; // 输出abcd
// 方法2$&#123;str[0]&#125;$&#123;str[4]&#125; // 结果是ae
$&#123;str[1..4]&#125; 　　　 // 结果是bcde// 返回指定字符的索引$&#123;str?index_of(&quot;n&quot;)&#125;
</code></pre>
<h6 id="日期输出"><a href="#日期输出" class="headerlink" title="日期输出"></a>日期输出</h6><pre><code class="jsp">$&#123;emp.date?string(&#39;yyyy-MM-dd&#39;)&#125; //日期格式
</code></pre>
<h6 id="数字输出-以数字20为例"><a href="#数字输出-以数字20为例" class="headerlink" title="数字输出(以数字20为例)"></a>数字输出(以数字20为例)</h6><pre><code class="jsp">$&#123;emp.name?string.number&#125; //输出20
$&#123;emp.name?string.currency&#125; //￥20.00
$&#123;emp.name?string.precent&#125; //20%
$&#123;1.222?int&#125; 　　　　　　　　 // 将小数转为int，输出1
&lt;#setting number_format=&quot;percent&quot;/&gt; // 设置数字默认输出方式(&#39;percent&#39;,百分比)
&lt;#assign answer=42/&gt; 　　　　　　　　 // 声明变量 answer 42
#&#123;answer&#125; 　　　　　　　　 // 输出 4,200%
$&#123;answer?string&#125; 　　　　 // 输出 4,200%
$&#123;answer?string.number&#125; 　　// 输出 42
$&#123;answer?string.currency&#125; // 输出 ￥42.00
$&#123;answer?string.percent&#125; 　// 输出 4,200%
#&#123;answer&#125; 　　　　　　　　// 输出 42
</code></pre>
<h6 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h6><pre><code class="jsp">表达式中支持的比较运算符有如下几个:= 或 == ：判断两个值是否相等.
!= ：判断两个值是否不等.
&gt; 或 gt ：判断左边值是否大于右边值
&gt;= 或 gte ：判断左边值是否大于等于右边值
&lt; 或 lt ：判断左边值是否小于右边值
&lt;= 或 lte ：判断左边值是否小于等于右边值
</code></pre>
<h6 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h6><pre><code class="jsp">FreeMarker表达式中完全支持算术运算,FreeMarker支持的算术运算符包括:+, - , * , / , % 注意：
(1)运算符两边必须是数字
(2)使用+运算符时,如果一边是数字,一边是字符串,就会自动将数字转换为字符串再连接,如:$&#123;3 + &quot;5&quot;&#125;,结果是:35
</code></pre>
<h6 id="FreeMarker中的运算符优先级如下-由高到低排列"><a href="#FreeMarker中的运算符优先级如下-由高到低排列" class="headerlink" title="FreeMarker中的运算符优先级如下(由高到低排列):"></a>FreeMarker中的运算符优先级如下(由高到低排列):</h6><blockquote>
<p>①、一元运算符:!<br>②、内建函数:?<br>③、乘除法:*, &#x2F; , %<br>④、加减法:- , +<br>⑤、比较:&gt; , &lt; , &gt;&#x3D; , &lt;&#x3D; (lt , lte , gt , gte)<br>⑥、相等:&#x3D;&#x3D; , &#x3D; , !&#x3D;<br>⑦、逻辑与:&amp;&amp;<br>⑧、逻辑或:||<br>⑨、数字范围:..实际上,我们在开发过程中应该使用括号来严格区分,这样的可读性好,出错少</p>
</blockquote>
<h6 id="if逻辑判断-注意：elseif-不加空格"><a href="#if逻辑判断-注意：elseif-不加空格" class="headerlink" title="if逻辑判断(注意：elseif 不加空格)"></a>if逻辑判断(注意：elseif 不加空格)</h6><pre><code class="jsp">&lt;#if condition&gt;
...
&lt;#elseif condition2&gt;
...
&lt;#elseif condition3&gt;
...
&lt;#else&gt;
...
&lt;/#if&gt;
</code></pre>
<h6 id="switch-条件可为数字，可为字符串"><a href="#switch-条件可为数字，可为字符串" class="headerlink" title="switch(条件可为数字，可为字符串)"></a>switch(条件可为数字，可为字符串)</h6><pre><code class="jsp">&lt;#switch value&gt;
 &lt;#case refValue1&gt;
....
&lt;#break&gt; 
&lt;#case refValue2&gt; 
....
&lt;#break&gt;
 &lt;#case refValueN&gt;
 ....
&lt;#break&gt;
 &lt;#default&gt;
 ....
 &lt;/#switch&gt;
</code></pre>
<h6 id="集合-amp-循环"><a href="#集合-amp-循环" class="headerlink" title="集合 &amp; 循环"></a>集合 &amp; 循环</h6><pre><code class="jsp">//遍历集合
&lt;#list empList! as emp&gt;
    $&#123;emp.name!&#125;    
&lt;/#list&gt;

//使用&lt;#break&gt;跳出循环
&lt;#if emp_index = 0&gt;&lt;#break&gt;&lt;/#if&gt;

//集合长度判断 
&lt;#if empList?size!=0&gt;&lt;/#if&gt; //判断=的时候,注意只要一个=符号,而不是==
&lt;#assign l=0..100/&gt;       // 定义一个int区间的0~100的集合，数字范围也支持反递增,如100..2
&lt;#list 0..100 as i&gt; 　　// 等效于java for(int i=0; i &lt;= 100; i++)
　　$&#123;i&#125;
&lt;/#list&gt;

// 截取子集合：
empList[3..5] //返回empList集合的子集合,子集合中的元素是empList集合中的第4-6个元素

// 创建集合：
&lt;#list [&quot;星期一&quot;, &quot;星期二&quot;, &quot;星期三&quot;, &quot;星期四&quot;, &quot;星期五&quot;, &quot;星期六&quot;, &quot;星期天&quot;] as x&gt;

// 集合连接运算,将两个集合连接成一个新的集合
&lt;#list [&quot;星期一&quot;,&quot;星期二&quot;,&quot;星期三&quot;] + [&quot;星期四&quot;,&quot;星期五&quot;,&quot;星期六&quot;,&quot;星期天&quot;] as x&gt;

// 除此之外,集合元素也可以是表达式,例子如下:
[2 + 2, [1, 2, 3, 4], &quot;whatnot&quot;]

// seq_contains：判断序列中的元素是否存在
&lt;#assign x = [&quot;red&quot;, 16, &quot;blue&quot;, &quot;cyan&quot;]&gt; 
$&#123;x?seq_contains(&quot;blue&quot;)?string(&quot;yes&quot;, &quot;no&quot;)&#125;    // yes
$&#123;x?seq_contains(&quot;yellow&quot;)?string(&quot;yes&quot;, &quot;no&quot;)&#125;  // no
$&#123;x?seq_contains(16)?string(&quot;yes&quot;, &quot;no&quot;)&#125;        // yes
$&#123;x?seq_contains(&quot;16&quot;)?string(&quot;yes&quot;, &quot;no&quot;)&#125;      // no

// seq_index_of：第一次出现的索引
&lt;#assign x = [&quot;red&quot;, 16, &quot;blue&quot;, &quot;cyan&quot;, &quot;blue&quot;]&gt; 
$&#123;x?seq_index_of(&quot;blue&quot;)&#125;  // 2

// sort_by：排序（升序）
&lt;#list movies?sort_by(&quot;showtime&quot;) as movie&gt;&lt;/#list&gt;

// sort_by：排序（降序）
&lt;#list movies?sort_by(&quot;showtime&quot;)?reverse as movie&gt;&lt;/#list&gt;

// 具体介绍：
// 不排序的情况：
&lt;#list movies as moive&gt;
　　&lt;a href=&quot;$&#123;moive.url&#125;&quot;&gt;$&#123;moive.name&#125;&lt;/a&gt;
&lt;/#list&gt;
//要是排序，则用
&lt;#list movies?sort as movie&gt;
　　&lt;a href=&quot;$&#123;movie.url&#125;&quot;&gt;$&#123;movie.name&#125;&lt;/a&gt;
&lt;/#list&gt;
    
/ 这是按元素的首字母排序。若要按list中对象元素的某一属性排序的话，则用
&lt;#list moives?sort_by([&quot;name&quot;]) as movie&gt;
　　&lt;a href=&quot;$&#123;movie.url&#125;&quot;&gt;$&#123;movie.name&#125;&lt;/a&gt;
&lt;/#list&gt;

//这个是按list中对象元素的[name]属性排序的，是升序，如果需要降序的话，如下所示：
&lt;#list movies?sort_by([&quot;name&quot;])?reverse as movie&gt;
　　&lt;a href=&quot;$&#123;movie.url&#125;&quot;&gt;$&#123;movie.name&#125;&lt;/a&gt;
&lt;/#list&gt;
    
//Map对象 创建map
&lt;#assign scores = &#123;&quot;语文&quot;:86,&quot;数学&quot;:78&#125;&gt;

// Map连接运算符
&lt;#assign scores = &#123;&quot;语文&quot;:86,&quot;数学&quot;:78&#125; + &#123;&quot;数学&quot;:87,&quot;Java&quot;:93&#125;&gt;

// Map元素输出
emp.name       // 全部使用点语法
emp[&quot;name&quot;]    // 使用方括号

// FreeMarker支持如下转义字符:
\&quot; ：双引号(u0022)
\&#39; ：单引号(u0027)
\\ ：反斜杠(u005C)
\n ：换行(u000A)
\r ：回车(u000D)
\t ：Tab(u0009)
\b ：退格键(u0008)
\f ：Form feed(u000C)
\l ：&lt;
\g ：&gt;
\a ：&amp;
\&#123; ：&#123;
\xCode ：直接通过4位的16进制数来指定Unicode码,输出该unicode码对应的字符.
    
// include指令的作用类似于JSP的包含指令:
&lt;#include &quot;/test.ftl&quot; encoding=&quot;UTF-8&quot; parse=true&gt;

// 在上面的语法格式中,两个参数的解释如下:
encoding=&quot;GBK&quot;  // 编码格式
parse=true 　　 // 是否作为ftl语法解析,默认是true，false就是以文本方式引入,
注意:在ftl文件里布尔值都是直接赋值的如parse=true,而不是parse=&quot;true&quot;
    
//import指令
类似于jsp里的import,它导入文件，然后就可以在当前文件里使用被导入文件里的宏组件
&lt;#import &quot;/libs/mylib.ftl&quot; as my&gt;
上面的代码将导入/lib/common.ftl模板文件中的所有变量,
交将这些变量放置在一个名为com的Map对象中，&quot;my&quot;在freemarker里被称作namespace

</code></pre>
<h6 id="数据-模板-x3D-结果"><a href="#数据-模板-x3D-结果" class="headerlink" title="数据 + 模板 &#x3D; 结果"></a>数据 + 模板 &#x3D; 结果</h6><blockquote>
<p>数据 <u>[Java代码]</u><br>User user &#x3D; new User();<br>user.setName(“张三”)；</p>
</blockquote>
<blockquote>
<p>模板 <u>[HTML简化]</u><br>&lt; span &gt;<br>    ${user.name}<br>&lt; &#x2F;span &gt;</p>
</blockquote>
<blockquote>
<p>结果<br>&lt; span &gt;<br> 张三<br>&lt; &#x2F;span &gt;</p>
</blockquote>
<ul>
<li>Freemarker是免费开源的模板引擎技术</li>
<li>Freemarker脚本为(Freemarker Template Language)</li>
<li>Freemarker提供了大量内建函数来简化开发</li>
</ul>
<h3 id="JSP与Freemarker"><a href="#JSP与Freemarker" class="headerlink" title="JSP与Freemarker"></a>JSP与Freemarker</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">JSP</th>
<th align="center">Freemarker</th>
</tr>
</thead>
<tbody><tr>
<td align="center">官方标准</td>
<td align="center">是</td>
<td align="center">否</td>
</tr>
<tr>
<td align="center">执行方式</td>
<td align="center">编译型</td>
<td align="center">解释型</td>
</tr>
<tr>
<td align="center">执行效率</td>
<td align="center">高</td>
<td align="center">低</td>
</tr>
<tr>
<td align="center">开发效率</td>
<td align="center">低</td>
<td align="center">高</td>
</tr>
<tr>
<td align="center">扩展能力</td>
<td align="center">弱</td>
<td align="center">强</td>
</tr>
<tr>
<td align="center">数据提取</td>
<td align="center">JSTL + EL</td>
<td align="center">内置标签</td>
</tr>
</tbody></table>
<p>前端工程师把数据写在ftl 然后后端工程师拿着名称去添加后台数据 </p>
<pre><code class="java">package com.example.json;


import freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateException;

import java.io.IOException;
import java.io.OutputStreamWriter;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

public class FreemarkerSample1 &#123;
    public static void main(String[] args) throws IOException, TemplateException &#123;
        //1. 加载模板
        Configuration confige = new Configuration(Configuration.VERSION_2_3_32);
                     // FreemarkerSample1类所在包中加载ftl所在文件
        confige.setClassForTemplateLoading(FreemarkerSample1.class, &quot;&quot;);
        Template t = confige.getTemplate(&quot;sample1.ftl&quot;);
        //2. 创建数据
        Map&lt;String,Object&gt; data = new HashMap&lt;String, Object&gt;();
        data.put(&quot;site&quot;,&quot;百度&quot;);
        data.put(&quot;url&quot;,&quot;https://www.abc.com&quot;);
        data.put(&quot;data&quot;,new Date());
        data.put(&quot;number&quot;,83719.88321);
        Map info = new HashMap();
        info.put(&quot;cpu&quot;,&quot;i5&quot;);
        Computer c1 = new Computer(&quot;123456&quot;,&quot;ALIENWARE&quot;,1,&quot;李四&quot;,new Date(), 12900f)
        data.put(&quot;computer&quot;,c1);
        //3. 产生输出    向目标输出
        t.process(data, new OutputStreamWriter(System.out));
    &#125;
&#125;
</code></pre>
<pre><code class="ftl">$&#123;site&#125;
$&#123;url&#125;
&lt;#--类似于EL表达式--&gt;
</code></pre>
<pre><code class="java">Computer.java
public class Computer&#123;
    private String sn; //序列号
    private String mode1; //型号
    private int state; //状态 1-在用 2-闲置 3-报废
    private String user; //使用人
    private Date dog; //采购日期
    private Float price; //购买价格
    private Map info; //电脑配置信息
    ......
&#125;
</code></pre>
<pre><code class="html">sample1.ftl
&lt;#-- Freemarker取值 --&gt;
$&#123;site&#125;
$&#123;url&#125;

&lt;#-- !默认值 --&gt;
$&#123;author!&quot;不存在的属性&quot;&#125;

&lt;#-- ？string格式化输出 --&gt;
$&#123;date?string(&quot;yyyy年MM月dd日 HH:mm:ss SSS&quot;)&#125;
$&#123;number?string(&quot;0.00&quot;)&#125;

SN:$&#123;computer.sn&#125;
型号:$&#123;computer.mode1&#125;
状态:$&#123;computer.state&#125;
用户:$&#123;computer.user&#125;
采购时间:$&#123;computer.dop?string(&quot;yyyy年MM月dd日&quot;)&#125;
采购价格:$&#123;computer.price?string(&quot;0.00&quot;)&#125;

//对map的提取
CPU:$&#123;computer.info[&quot;cpu&quot;]&#125;
内存:$&#123;computer.info[&quot;memory&quot;]!&quot;无内存信息&quot;&#125;
</code></pre>
<h3 id="FTL-FreeMarker-Template-Language-取值"><a href="#FTL-FreeMarker-Template-Language-取值" class="headerlink" title="FTL(FreeMarker Template Language)取值"></a>FTL(FreeMarker Template Language)取值</h3><ul>
<li><p><strong>${属性名}</strong> 取值，可对属性进行计算</p>
</li>
<li><p><strong>${属性名!默认值}</strong> 使用默认值[解决空值异常]<br>${author!”不存在的属性”} &#x3D;&gt; 不存在的属性</p>
</li>
<li><p><strong>${属性名?string}</strong> 格式化输出<br>${data?string(“yyyy年MM月dd日 HH:mm:ss SSS”)}</p>
<blockquote>
<p>${number?string(“0.00”)} 小数部位保留两位</p>
</blockquote>
</li>
</ul>
<h6 id="if分支判断"><a href="#if分支判断" class="headerlink" title="if分支判断"></a>if分支判断</h6><pre><code class="java">&lt;#if 条件1&gt;
  条件1成立执行代码
&lt;#if 条件2&gt;
  条件2成立执行代码
&lt;#if 条件3&gt;
  条件3成立执行代码
&lt;#else&gt;
  其他情况下执行代码
</code></pre>
<h6 id="switch分支判断"><a href="#switch分支判断" class="headerlink" title="switch分支判断"></a>switch分支判断</h6><pre><code class="java">&lt;#switch value&gt;
  &lt;#case refValue1&gt;
    ...
    &lt;#break&gt;
  &lt;#case refValue2&gt;
    ...
    &lt;#break&gt;
  &lt;#case refValueN&gt;
    ...
    &lt;#break&gt;
&lt;#default&gt;
...
&lt;/#switch&gt;
</code></pre>
<hr>
<pre><code class="java">sample1.ftl
&lt;#-- Freemarker取值 --&gt;
$&#123;site&#125;
$&#123;url&#125;

&lt;#-- !默认值 --&gt;
$&#123;author!&quot;不存在的属性&quot;&#125;

&lt;#-- ？string格式化输出 --&gt;
$&#123;date?string(&quot;yyyy年MM月dd日 HH:mm:ss SSS&quot;)&#125;
$&#123;number?string(&quot;0.00&quot;)&#125;
&lt;#if computer.sn == &quot;1234567&quot;&gt;
重要设备
&lt;/#if&gt;

SN:$&#123;computer.sn&#125;
型号:$&#123;computer.mode1&#125;
状态:$&#123;computer.state&#125;

&lt;#if computer.state == 1&gt;
状态:正在使用
&lt;#elseif computer.state == 2&gt;
状态:闲置
&lt;#elseif computer.state == 3&gt;
状态:已作废
&lt;/#if&gt;

&lt;#if computer.user??&gt; //??代表判断对象是否为空,true不为空,false为空
用户:$&#123;computer.user&#125;
&lt;/#if&gt;
--------------------------------------------------------
&lt;#switch computer.state&gt;  //同一个属性的不同值进行判断
    &lt;#case1&gt;
        状态：正在使用
        &lt;#break&gt;
    &lt;#case2&gt;
        状态：闲置
        &lt;#break&gt;
    &lt;#case3&gt;
        状态：已作废
        &lt;#break&gt;
    &lt;#default&gt;
        状态：无效状态
--------------------------------------------------------
采购时间:$&#123;computer.dop?string(&quot;yyyy年MM月dd日&quot;)&#125;
采购价格:$&#123;computer.price?string(&quot;0.00&quot;)&#125;

//对map的提取
CPU:$&#123;computer.info[&quot;cpu&quot;]&#125;
内存:$&#123;computer.info[&quot;memory&quot;]!&quot;无内存信息&quot;&#125;
</code></pre>
<h3 id="list迭代列表"><a href="#list迭代列表" class="headerlink" title="list迭代列表"></a>list迭代列表</h3><pre><code class="JAVA">&lt;#list students as stu&gt;
  &lt;li&gt;$&#123;stu_index&#125;-$&#123;stu.name&#125;&lt;/li&gt;
&lt;/#list&gt;
</code></pre>
<h6 id="list迭代Map"><a href="#list迭代Map" class="headerlink" title="list迭代Map"></a>list迭代Map</h6><pre><code class="java">&lt;#list map?keys as key&gt;
  $&#123;key&#125;:$&#123;map[key]&#125;
&lt;/#list&gt;
</code></pre>
<pre><code class="java">FreemarkerSample2.java
package com.example.json;


import freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateException;

import java.io.IOException;
import java.io.OutputStreamWriter;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

public class FreemarkerSample1 &#123;
    public static void main(String[] args) throws IOException, TemplateException &#123;
        //1. 加载模板
        Configuration confige = new Configuration(Configuration.VERSION_2_3_32);
          // FreemarkerSample1类所在包中加载ftl所在文件
        confige.setClassForTemplateLoading(FreemarkerSample2.class, &quot;&quot;);
        Template t = confige.getTemplate(&quot;sample1.ftl&quot;); //得到模板对象
        //2. 创建数据
        Map&lt;String,Object&gt; data = new HashMap&lt;String,object&gt;();
        List&lt;Computer&gt; computers = new ArrayList();
        computers.add(new Computer(&quot;123456&quot;,&quot;ALIENWARE&quot;,2,null,new Date(), 12900f, new HashMap()));
        computers.add(new Computer(&quot;123456&quot;,&quot;HP XXX&quot;,1,&quot;张三&quot;,new Date(), 12900f, new HashMap()));
        computers.add(new Computer(&quot;1233145&quot;,&quot;DELL XXX&quot;,3,&quot;李四&quot;,new Date(), 12900f, new HashMap()));
        computers.add(new Computer(&quot;1234536&quot;,&quot;ACER XXX&quot;,1,&quot;王五&quot;,new Date(), 12900f, new HashMap()));
        computers.add(new Computer(&quot;12344456&quot;,&quot;MSI XXX&quot;,1,&quot;赵六&quot;,new Date(), 12900f, new HashMap()));
        data.put(&quot;computers&quot;, computers);
        //LinkedHashMap可以保证数据按存放顺序进行提取
        Map computerMap = new LinkedHashMap();
        for(Computer c : computers)&#123;
            computerMap.put(c.getSn(), c);
        &#125; //下方新增
        //3. 产生输出    向目标输出
        t.process(data, new OutputStreamWriter(System.out));
    &#125;
&#125;
</code></pre>
<pre><code class="java">sample2.ftl
&lt;#list computers as c&gt; //迭代循环 用变量c
序号:$&#123;c_index&#125; //迭代变量 index保存了循环的索引,从0开始 +1则从1开始
SN:$&#123;c.sn&#125;
型号:$&#123;c.mode1&#125;
&lt;#switch c.state&gt;  //同一个属性的不同值进行判断
    &lt;#case1&gt;
        状态：正在使用
        &lt;#break&gt;
    &lt;#case2&gt;
        状态：闲置
        &lt;#break&gt;
    &lt;#case3&gt;
        状态：已作废
        &lt;#break&gt;
    &lt;#default&gt;
        状态：无效状态
&lt;/#switch&gt;
&lt;#if c.user??&gt;
状态:$&#123;c.state&#125;
&lt;/#if&gt;
用户:$&#123;c.user&#125;
采购时间:$&#123;c.dop?string(&quot;yyyy-MM-dd&quot;)&#125;
采购价格:$&#123;c.price?string(&quot;0.00&quot;)&#125;
&lt;/#list&gt;
-------------------------------------------------------------
&lt;#list computer_map?keys as k &gt;
$&#123;k&#125;-$&#123;computer_map[k].model&#125;
$&#123;computer_map[k].price?string(&quot;0.00&quot;)&#125;
&lt;/#list&gt;
</code></pre>
<h3 id="Freemarker内建函数-看成java代码-就是点”-”换成了问号”-”"><a href="#Freemarker内建函数-看成java代码-就是点”-”换成了问号”-”" class="headerlink" title="Freemarker内建函数[看成java代码 就是点”.”换成了问号”?”]"></a>Freemarker内建函数[<span style = "color : red">看成java代码 就是点”.”换成了问号”?”</span>]</h3><p><strong>freemarker.foofun.cn</strong> 在线学习</p>
<table>
<thead>
<tr>
<th align="center">函数名</th>
<th align="center">说明</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">lower_case&#x2F;upper_case</td>
<td align="center">大小写转换</td>
<td align="center">“abcde”?upper_case</td>
</tr>
<tr>
<td align="center">cap_first</td>
<td align="center">首字母大写</td>
<td align="center">“”abcde””?cap_first</td>
</tr>
<tr>
<td align="center">index_of</td>
<td align="center">查找字符索引</td>
<td align="center">“abcde”?index_of(“b”)</td>
</tr>
<tr>
<td align="center">length</td>
<td align="center">返回字符串长度</td>
<td align="center">“abcde”?length</td>
</tr>
<tr>
<td align="center">round&#x2F;floor&#x2F;ceiling</td>
<td align="center">四舍五入&#x2F;下取整&#x2F;上取整</td>
<td align="center">pi?floor</td>
</tr>
<tr>
<td align="center">size</td>
<td align="center">得到集合元素总数</td>
<td align="center">students?size</td>
</tr>
<tr>
<td align="center">first&#x2F;last</td>
<td align="center">获取第一个&#x2F;最后一个元素</td>
<td align="center">students?first</td>
</tr>
<tr>
<td align="center">sort_by</td>
<td align="center">按某个属性对集合排序</td>
<td align="center">list?sort_by(“time”)</td>
</tr>
</tbody></table>
<pre><code class="java">example:
Map&lt;String,Object&gt; data = new HashMap&lt;String,Object&gt;();
data.put(&quot;name&quot;, &quot;jackson&quot;);
----------------------------
$&#123;name?cap_first&#125;
//违禁字母屏蔽
$&#123;words?replace(&quot;blood&quot;, &quot;******&quot;)&#125;
$&#123;words?index_of(&quot;blood&quot;)&#125;
//三目运算 
$&#123;(words?index_of(&quot;blood&quot;) != -1)?string(&quot;包含敏感词汇&quot;,&quot;不包含敏感词汇&quot;)&#125;

公司共有$&#123;computers?size&#125;台电脑
//集合排序 返回一个新的集合
&lt;#list computers?sort_by(&quot;price&quot;) as c &gt;
    $&#123;c.sn&#125;-$&#123;c.price&#125;
&lt;/#list&gt;
//集合排序&#123;降序&#125;
&lt;#list computers?sort_by(&quot;price&quot;)?reverse as c &gt;
    $&#123;c.sn&#125;-$&#123;c.price&#125;
&lt;/#list&gt;
</code></pre>
<h3 id="Freemarker与Servlet整合"><a href="#Freemarker与Servlet整合" class="headerlink" title="Freemarker与Servlet整合"></a>Freemarker与Servlet整合</h3><pre><code class="xml">web.xml
&lt;servlet&gt;
  &lt;servlet-name&gt;freemarker&lt;/servlet-name&gt;
  &lt;servlet-class&gt;freemarkerServlet&lt;/servlet-class&gt;
  &lt;init-param&gt;
      &lt;param-name&gt;TemplatePath&lt;/param-name&gt;
    &lt;param-value&gt;/WEB-INF/ftl&lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;freemarker&lt;/servlet-name&gt;
  &lt;url-pattern&gt;*.ftl&lt;/url-pattern&gt; //地址映射 输入这样的后缀时自动去/WEB-INF/ftl查找
&lt;/servlet-mapping&gt;
</code></pre>
<pre><code class="java">test.ftl
这是一个测试FTL文件

localhost:8080/fm-web/test.ftl
</code></pre>
<pre><code class="java">employee.ftl
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;
    &lt;title&gt;员工列表&lt;/title&gt;
    &lt;link href=&quot;./css/bootstrap.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot;/&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;./js/jquery-1.11.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;./js/bootstrap.js&quot;&gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;
        .pagination &#123;
            margin: 0px
        &#125;

        .pagination &gt; li &gt; a, .pagination &gt; li &gt; span &#123;
            margin: 0 5px;
            border: 1px solid #dddddd;
        &#125;

        .glyphicon &#123;
            margin-right: 3px;
        &#125;

        .form-control[readonly] &#123;
            cursor: pointer;
            background-color: white;
        &#125;
        #dlgPhoto .modal-body&#123;
            text-align: center;
        &#125;
        .preview&#123;

            max-width: 500px;
        &#125;
    &lt;/style&gt;
    &lt;script&gt;
        $(function () &#123;
            
            $(&quot;#btnAdd&quot;).click(function () &#123;
                $(&#39;#dlgForm&#39;).modal()
            &#125;);
        &#125;)
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;h1 style=&quot;text-align: center&quot;&gt;IMOOC员工信息表&lt;/h1&gt;
        &lt;div class=&quot;panel panel-default&quot;&gt;
            &lt;div class=&quot;clearfix panel-heading &quot;&gt;
                &lt;div class=&quot;input-group&quot; style=&quot;width: 500px;&quot;&gt;
                    &lt;button class=&quot;btn btn-primary&quot; id=&quot;btnAdd&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-zoom-in&quot;&gt;&lt;/span&gt;新增
                    &lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;table class=&quot;table table-bordered table-hover&quot;&gt;
                &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;序号&lt;/th&gt;
                    &lt;th&gt;员工编号&lt;/th&gt;
                    &lt;th&gt;姓名&lt;/th&gt;
                    &lt;th&gt;部门&lt;/th&gt;
                    &lt;th&gt;职务&lt;/th&gt;
                    &lt;th&gt;工资&lt;/th&gt;
                    &lt;th&gt;&amp;nbsp;&lt;/th&gt;
                &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
//&lt;c:forEach items=&quot;$&#123;applicationScope.employees&#125;&quot; var=&quot;emp&quot; varStatus=&quot;idx&quot;&gt;
                &lt;#list employee_list as emp&gt;
                &lt;tr&gt;
                    &lt;td&gt;$&#123;emp_index + 1&#125;&lt;/td&gt;
                    &lt;td&gt;$&#123;emp.empno?string(&quot;0&quot;)&#125;&lt;/td&gt; //整数输出用0初始化
                    &lt;td&gt;$&#123;emp.ename&#125;&lt;/td&gt;
                    &lt;td&gt;$&#123;emp.department&#125;&lt;/td&gt;
                    &lt;td&gt;$&#123;emp.job&#125;&lt;/td&gt;
//&lt;td style=&quot;color: red;font-weight: bold&quot;&gt;￥&lt;fmt:formatNumber value=&quot;$&#123;emp.salary&#125;&quot; pattern=&quot;0,000.00&quot;&gt;&lt;/fmt:formatNumber&gt;&lt;/td&gt;
                    &lt;td style=&quot;color: red;font-weight: bold&quot;&gt;￥$&#123;emp.salary?string(&quot;0.00&quot;)&#125;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;/c:forEach&gt;
            &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- 表单 --&gt;
&lt;div class=&quot;modal fade&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; id=&quot;dlgForm&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot; role=&quot;document&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
            &lt;div class=&quot;modal-header&quot;&gt;
                &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 class=&quot;modal-title&quot;&gt;新增员工&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class=&quot;modal-body&quot;&gt;
                &lt;form action=&quot;/untitled_war_exploded/create&quot; method=&quot;post&quot; &gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;empno&quot;&gt;员工编号&lt;/label&gt;
                        &lt;input type=&quot;text&quot; name=&quot;empno&quot; class=&quot;form-control&quot; id=&quot;empno&quot; placeholder=&quot;请输入员工编号&quot;&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;ename&quot;&gt;员工姓名&lt;/label&gt;
                        &lt;input type=&quot;text&quot; name=&quot;ename&quot; class=&quot;form-control&quot; id=&quot;ename&quot; placeholder=&quot;请输入员工姓名&quot;&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label&gt;部门&lt;/label&gt;
                        &lt;select id=&quot;dname&quot; name=&quot;department&quot; class=&quot;form-control&quot;&gt;
                            &lt;option selected=&quot;selected&quot;&gt;请选择部门&lt;/option&gt;
                            &lt;option value=&quot;市场部&quot;&gt;市场部&lt;/option&gt;
                            &lt;option value=&quot;研发部&quot;&gt;研发部&lt;/option&gt;
                            &lt;option value=&quot;后勤部&quot;&gt;后勤部&lt;/option&gt;
                        &lt;/select&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label&gt;职务&lt;/label&gt;
                        &lt;input type=&quot;text&quot; name=&quot;job&quot; class=&quot;form-control&quot; id=&quot;sal&quot; placeholder=&quot;请输入职务&quot;&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;label for=&quot;sal&quot;&gt;工资&lt;/label&gt;
                        &lt;input type=&quot;text&quot; name=&quot;salary&quot; class=&quot;form-control&quot; id=&quot;sal&quot; placeholder=&quot;请输入工资&quot;&gt;
                    &lt;/div&gt;

                    &lt;div class=&quot;form-group&quot; style=&quot;text-align: center;&quot;&gt;
                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;保存&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;

        &lt;/div&gt;&lt;!-- /.modal-content --&gt;
    &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;
&lt;/div&gt;&lt;!-- /.modal --&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="java">Employee.java
public class Employee &#123;
    private Integer empno;
    private String ename;
    private String department;
    private String job;
    private Float salary;
    ...
&#125;
</code></pre>
<pre><code class="java">ListServlet.java
package com.imooc.freemarker.servlet;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class ListServlet
 */
@WebServlet(&quot;/list&quot;)
public class ListServlet extends HttpServlet &#123;
    private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public ListServlet() &#123;
        super();
        // TODO Auto-generated constructor stub
    &#125;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
        List list = new ArrayList();
        list.add(new Employee(7731,&quot;张三&quot; , &quot;市场部&quot; , &quot;客户代表&quot; , 8000f));
        list.add(new Employee(8871,&quot;李四&quot; , &quot;研发部&quot; , &quot;运维工程师&quot; , 7000f));
        request.getServletContext().setAttribute(&quot;employee_list&quot;, list);
        request.getRequestDispatcher(&quot;/employee.ftl&quot;).forward(request, response);
    &#125;
&#125;
</code></pre>

    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2025 P-luminary
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @Asuna
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a>
<!--         & <a target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div> -->
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'hexo-theme-particle',      // The repository of store comments,
        owner: 'P-luminary',
        admin: ['P-luminary'],
        language: 'en',
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>