
<!DOCTYPE html>
<html lang="zh_CH ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P-luminary || Mysql</title>
    <meta name="author" content="Asuna">
    <meta name="description" content=" ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/https://raw.githubusercontent.com/P-luminary/images/master/data/asuna.jpg">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/maiden-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">P-luminary</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/tags/语法">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>P-luminary</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/tags/语法">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>Mysql </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/9/5
        </span>

        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/后端" style=color:#ffa2c4>
                    后端
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <p>中：Mysql SqlServer</p>
<p>大：Oracle DB2</p>
<p>数据类型：</p>
<ul>
<li>数值：int、float</li>
<li>非数值：char、<strong>varchar</strong><ul>
<li>char 和 varchar 的区别</li>
</ul>
</li>
</ul>
<p>(占用空间)(查询效率快) char是定长 char 8是八个字符长度</p>
<p>(节省空间)(查询效率慢) varchar是变长</p>
<h2 id="增："><a href="#增：" class="headerlink" title="增："></a>增：</h2><pre><code class="sql">CREATE TABLE a_user(id int,name varchar(100)); //字段名和数据类型用逗号分隔
INSERT INTO a_user VALUES(1,&#39;小明&#39;);
INSERT INTO a_user(id,name) VALUES(2,&#39;小红2&#39;);
INSERT INTO a_user(id) VALUES(3);
</code></pre>
<h6 id="快速复制一张表-复制表结构及其所有数据"><a href="#快速复制一张表-复制表结构及其所有数据" class="headerlink" title="快速复制一张表 (复制表结构及其所有数据)"></a>快速复制一张表 (复制表结构及其所有数据)</h6><pre><code class="sql">CREATE TABLE a_user1 AS SELECT * FROM a_user;
</code></pre>
<h6 id="复制一张表-不要数据"><a href="#复制一张表-不要数据" class="headerlink" title="复制一张表 (不要数据)"></a>复制一张表 (不要数据)</h6><pre><code class="sql">CREATE TABLE a_user2 AS SELECT * FROM a_user WHERE 1=2;
</code></pre>
<h6 id="复制一张表-复制部分表结构及其部分数据"><a href="#复制一张表-复制部分表结构及其部分数据" class="headerlink" title="复制一张表 (复制部分表结构及其部分数据)"></a>复制一张表 (复制部分表结构及其部分数据)</h6><pre><code class="sql">CREATE TABLE a_user3 AS SELECT id FROM a_user;
</code></pre>
<h2 id="删："><a href="#删：" class="headerlink" title="删："></a>删：</h2><pre><code class="sql">DELETE FROM a_user1; (可以还原数据)
删除表中的部分数据(可以通过where子句)
会造成磁盘高位现象
让数据不可见(仍占用磁盘空间)-&gt;单纯拖到回车站
===============================
TRUNCATE TABLE a_user3; (永远不可以还原数据)
只能清空表的数据，不能进行删除
能够清楚磁盘高位现象
彻底删除-&gt;Shift + Delete
===============================
DROP table_user; (永远不可以还原数据)
DROP COLUMN age, DROP COLUMN password
</code></pre>
<p>一张表100万条数据，每天删除100万，每天新增100万，1年后还是100万<br>但查询效率低下，问 为什么？ 如何解决？</p>
<pre><code class="sql">CREATE TABLE t_userbak AS SELECT * FROM t_user;
TRUNCATE TABLE t_user;
INSERT INTO t_user SELECT * FROM t_userbak;
DROP TABLE t_usebak;
</code></pre>
<h2 id="改："><a href="#改：" class="headerlink" title="改："></a>改：</h2><pre><code class="sql">增加表字段：
ALTER TABLE t_user add(age INT, password VARCHAR(255))
</code></pre>
<pre><code class="sql">删除表字段：
ALTER TABLE t_user
DROP COLUMN age, DROP COLUMN password
</code></pre>
<pre><code class="SQL">修改字段的长度：
变更表字段name-&gt;name(名字未改变，但是长度改变)
ALTER TABLE t_user
CHANGE name NAME VARCHAR(200), 
CHANGE password PASSWORD VARCHAR(255)
</code></pre>
<h6 id="ALTER隐藏报错：已经有了原始数据不允许往回缩小"><a href="#ALTER隐藏报错：已经有了原始数据不允许往回缩小" class="headerlink" title="ALTER隐藏报错：已经有了原始数据不允许往回缩小"></a>ALTER隐藏报错：已经有了原始数据不允许往回缩小</h6><h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><pre><code class="sql">SELECT * FROM t_user 查询表
</code></pre>
<h2 id="★★★-数据库六大约束-★★★"><a href="#★★★-数据库六大约束-★★★" class="headerlink" title="★★★ 数据库六大约束 ★★★"></a>★★★ 数据库六大约束 ★★★</h2><p>作用：保证数据的完整性和合理性</p>
<p>语法：<strong>constraint</strong> 约束类型 约束名 (约束字段名) </p>
<p><span style = "color : red"><strong>主键约束</strong></span>(主键为外键而生)</p>
<pre><code class="sql">主键：PRIMARY KEY
CREATE TABLE t_class(id INT, class VARCHAR(50)),
CONSTRAINT PRIMARY KRY pk_id(id);
</code></pre>
<p>**<span style = "color : red">检查约束</span>**：check</p>
<pre><code class="sql">CREATE TABLE t_user9(id INT PRIMARY KEY, sex VARCHAR(50),
CONSTRAINT ck_sex CHECK
(sex=&#39;男&#39; OR sex=&#39;女&#39;));

CONSTRAINT ck_age1 CHECK (age1&gt;=0 AND age1&lt;=150),
</code></pre>
<p><span style = "color : red"><strong>唯一约束</strong></span>：unique 保证该字段不会重复</p>
<pre><code class="sql">CREATE TABLE t_user4(id INT, name VARCHAR(50)),
CONSTRAINT unique uq_id(id,z name) //uq_id为约束名称
------------------------------------------------
注意复合字段约束的存在
INSERT INTO t_user4 VALUES(1,&#39;zsf’)
==================================================
建立表后发现后期需要约束：(事后补约束) 有重复的局部删掉再约束
CREATE TABLE t_user5(id int, name varchar(50));
ALTER TABLE t_user5 ADD CONSTRAINT unique uq_id(id);
==================================================
此方法没有约束 名称
CREATE TABLE t_user6(id INT PRIMARY KEY, name VARCHAR(50));
</code></pre>
<p>**<span style = "color : red">外键约束</span>**：foregin key</p>
<p>学生表的班级外键 指向班级表的id主键，保证学生的班级一定是在班级表中存在的班级</p>
<pre><code class="sql">CREATE TABLE t_student(id INT PRIMARY KEY, name VARCHAR(50),
cid INT CONSTRAINT FOREIGN KEY fk_cid(cid) REFERENCES t_class(id));
</code></pre>
<p>**<span style = "color : red">非空约束</span>**：not null</p>
<pre><code class="sql">CREATE TABLE t_user10
(id INT PRIMARY KEY, sex VARCHAR(50) not null)
</code></pre>
<p>**<span style = "color : red">默认约束</span>**：default</p>
<pre><code class="sql">CREATE TABLE t_user11
(id INT PRIMARY KEY, sex VARCHAR(50) default&#39;妖&#39;)
</code></pre>
<hr>
<h3 id="一个题目涉及到的50个Sql语句"><a href="#一个题目涉及到的50个Sql语句" class="headerlink" title="一个题目涉及到的50个Sql语句 "></a><span style = "color : green">一个题目涉及到的50个Sql语句 </span></h3><p><strong>sql文件位于：【实训第二次数据库(江西移动)】</strong></p>
<p>–（下面表的结构以给出,自己在数据库中建立表.并且添加相应的数据,数据要全面些. 其中Student表中,SId为学生的ID）</p>
<p>————————————表结构————————————–<br>–学生表tblStudent（编号StuId、姓名StuName、年龄StuAge、性别StuSex）<br>–课程表tblCourse（课程编号CourseId、课程名称CourseName、教师编号TeaId）<br>–成绩表tblScore（学生编号StuId、课程编号CourseId、成绩Score）</p>
<h2 id="–教师表tblTeacher（教师编号TeaId、姓名TeaName）"><a href="#–教师表tblTeacher（教师编号TeaId、姓名TeaName）" class="headerlink" title="–教师表tblTeacher（教师编号TeaId、姓名TeaName）"></a>–教师表tblTeacher（教师编号TeaId、姓名TeaName）</h2><pre><code class="sql">--问题： 
--1、查询“001”课程比“002”课程成绩高的所有学生的学号；[自链接]
SELECT * FROM tblscore t1
WHERE t1.COURSEID = &#39;001&#39;
AND t2.COURSEID = &#39;002&#39; AND t1.STUID = t2.STUID
AND t1.SCORE &gt; t2.SCORE
AND t1.STUID = t3.STUID

--2、查询平均成绩大于60分的同学的学号和平均成绩；[函数+分组查询(条件过滤)]
SELECT t1.stuid, avg(t1.score) FROM tblscoret1
GROUP BY t1.stuid
HAVING avg(t1.score) &gt; 60

--3、查询所有同学的学号、姓名、选课数、总成绩;[unt sum]



--4、查询姓“李”的老师的个数；[count like]


--5、查询没学过“叶平”老师课的同学的学号、姓名；[逆向]



--6、查询学过“001”并且也学过编号“002”课程的同学的学号、姓名；



--7、查询学过“叶平”老师所教的所有课的同学的学号、姓名； 


--8、查询课程编号“002”的成绩比课程编号“001”课程低的所有同学的学号、姓名； 

--9、查询所有课程成绩小于60分的同学的学号、姓名；

--10、查询没有学全所有课的同学的学号、姓名； 

--11、查询至少有一门课与学号为“1001”的同学所学相同的同学的学号和姓名；
 ------运用连接查询

 ------嵌套子查询

--12、查询至少学过学号为“1001”同学所有课程的其他同学学号和姓名； 





--13、把“SC”表中“叶平”老师教的课的成绩都更改为此课程的平均成绩； (从子查询中获取父查询中的表名，这样也行？？？？)
 --创建测试表 


--14、查询和“1002”号的同学学习的课程完全相同的其他同学学号和姓名；  


--15、删除学习“叶平”老师课的SC表记录；


--16、向SC表中插入一些记录，这些记录要求符合以下条件：没有上过编号“003”课程的同学学号、&#39;002&#39;号课的平均成绩； 

--17、按平均成绩从高到低显示所有学生的“数据库”、“企业管理”、“英语”三门的课程成绩，按如下形式显示： 学生ID,,数据库,企业管理,英语,有效课程数,有效平均分 


--18、查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分 


--19、按各科平均成绩从低到高和及格率的百分数从高到低顺序 (百分数后如何格式化为两位小数??)


--20、查询如下课程平均成绩和及格率的百分数(用&quot;1行&quot;显示): 企业管理（001），马克思

--21、查询不同老师所教不同课程平均分从高到低显示 


--22、查询如下课程成绩第 3 名到第 6 名的学生成绩单：企业管理（001），马克思（002），UML （003），数据库（004） 格式：[学生ID],[学生姓名],企业管理,马克思,UML,数据库,平均成绩 


--23、统计列印各科成绩,各分数段人数:课程ID,课程名称,[100-85],[85-70],[70-60],[ &lt;60] 


--24、查询学生平均成绩及其名次  so


--25、查询各科成绩前三名的记录:(不考虑成绩并列情况) so


--26、查询每门课程被选修的学生数  so


--27、查询出只选修了一门课程的全部学生的学号和姓名 so 


--28、查询男生、女生人数  so

--29、查询姓“张”的学生名单  so

--30、查询同名同性学生名单，并统计同名人数  so

--31、1981年出生的学生名单(注：Student表中Sage列的类型是datetime) so 

--32、查询每门课程的平均成绩，结果按平均成绩升序排列，
平均成绩相同时，按课程号降序排列 


--33、查询平均成绩大于85的所有学生的学号、姓名和平均成绩 

--34、查询课程名称为“数据库”，且分数低于60的学生姓名和分数 


--35、查询所有学生的选课情况； 


--36、查询任何一门课程成绩在70分以上的姓名、课程名称和分数； 


--37、查询不及格的课程，并按课程号从大到小排列 


--38、查询课程编号为003且课程成绩在80分以上的学生的学号和姓名； 


--39、求选了课程的学生人数 


--40、查询选修“叶平”老师所授课程的学生中，成绩最高的学生姓名及其成绩 

--41、查询各个课程及相应的选修人数 

--42、查询不同课程成绩相同的学生的学号、课程号、学生成绩 

--43、查询每门功成绩最好的前两名 

--44、统计每门课程的学生选修人数（超过10人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列  


--45、检索至少选修两门课程的学生学号 

 --有重复课程时用此方法(如补考)

--46、查询全部学生都选修的课程的课程号和课程名 

--47、查询没学过“叶平”老师讲授的任一门课程的学生姓名 

--48、查询两门以上不及格课程的同学的学号及其平均成绩 

--49、检索“004”课程分数小于60，按分数降序排列的同学学号 (ok)

--50、删除“002”同学的“001”课程的成绩 
</code></pre>

    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2025 P-luminary
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @Asuna
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a>
<!--         & <a target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div> -->
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'hexo-theme-particle',      // The repository of store comments,
        owner: 'P-luminary',
        admin: ['P-luminary'],
        language: 'en',
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>